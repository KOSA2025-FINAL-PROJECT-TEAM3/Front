# ERD ìµœì¢… 3-Way Comparison

> Version A (.github) vs Version B (ì´ˆì•ˆ) vs Version C (ìµœì¢…ì•ˆ)
>
> **ë¶„ì„ì¼**: 2025-11-10
> **ëª©ì **: 3ê°œ ERDì˜ ê¸°ëŠ¥ ì»¤ë²„ë¦¬ì§€ í‰ê°€ ë° ìµœì¢… ê¶Œì¥ì•ˆ ë„ì¶œ

---

## ğŸ“Š ì „ì²´ ê°œìš”

| í•­ëª© | Version A (.github) | Version B (ì´ˆì•ˆ) | Version C (ìµœì¢…) |
|------|---------------------|-----------------|-----------------|
| **íŒŒì¼ëª…** | 07-database-erd.mmd | DATABASE_ERD.dbml | DATABASE_ERD_V3.dbml |
| **í…Œì´ë¸” ìˆ˜** | ~19ê°œ | 18ê°œ | **26ê°œ** |
| **í¬ë§·** | Mermaid | DBML | DBML |
| **ì‘ì„± ì‹œì ** | ì´ˆê¸° ì„¤ê³„ | Claude ì²« êµ¬í˜„ | ì •ì˜ì„œ ì¬ê²€í†  í›„ ì¬ì„¤ê³„ |

---

## ğŸ—‚ï¸ í…Œì´ë¸” ë³´ìœ  í˜„í™© ë¹„êµ

### âœ… ê³µí†µ í…Œì´ë¸” (3ê°œ ë²„ì „ ëª¨ë‘ ë³´ìœ )

| í…Œì´ë¸”ëª… | Version A | Version B | Version C | ìš©ë„ |
|---------|-----------|-----------|-----------|------|
| `users` | âœ… Basic | âœ… **Kakao OAuth** | âœ… **Enhanced** | ì‚¬ìš©ì ê¸°ë³¸ ì •ë³´ |
| `family_groups` | âœ… | âœ… **Hocuspocus** | âœ… **Hocuspocus** | ê°€ì¡± ê·¸ë£¹ |
| `family_members` | âœ… | âœ… **Permissions** | âœ… **Permissions** | ê°€ì¡± êµ¬ì„±ì› |
| `medications` | âœ… | âœ… **OCR link** | âœ… **OCR link** | ì•½ë¬¼ ì •ë³´ |
| `medication_schedules` | âœ… | âœ… | âœ… | ë³µì•½ ì¼ì • |
| `medication_logs` | âœ… | âœ… **Family sync** | âœ… **Enhanced** | ë³µì•½ ê¸°ë¡ |
| `diet_logs` | âœ… | âœ… **Photo** | âœ… **Photo** | ì‹ë‹¨ ê¸°ë¡ |
| `diet_warnings` | âœ… | âœ… **Family alert** | âœ… **Family alert** | ì•½-ìŒì‹ ê²½ê³  |
| `notifications` | âœ… | âœ… **Multi-channel** | âœ… **7 types** | ì•Œë¦¼ |

**ìŠ¹ì**: Version C (ê°€ì¥ í–¥ìƒëœ êµ¬í˜„)

---

### ğŸ”´ ì¸ì¦ & ë³´ì•ˆ í…Œì´ë¸”

| í…Œì´ë¸”ëª… | Version A | Version B | Version C | ì¤‘ìš”ë„ |
|---------|-----------|-----------|-----------|--------|
| `oauth_providers` | âŒ **ì—†ìŒ** | âœ… | âœ… | ğŸ”´ CRITICAL |
| `refresh_tokens` | âŒ **ì—†ìŒ** | âœ… | âœ… | ğŸ”´ CRITICAL |
| `audit_logs` | âŒ | âœ… | âœ… | ğŸŸ¡ IMPORTANT |

**ë¶„ì„**:
- Version AëŠ” **Kakao OAuth ë¶ˆê°€ëŠ¥** (ë¡œê·¸ì¸ ìì²´ê°€ ì•ˆ ë¨!)
- JWT refresh token ê´€ë¦¬ ì—†ìŒ (ì„¸ì…˜ ê´€ë¦¬ ë¶ˆê°€)
- GDPR ê°ì‚¬ ë¡œê·¸ ì—†ìŒ

**ìŠ¹ì**: Version B, C (ë‘˜ ë‹¤ ì™„ë²½, AëŠ” ì¹˜ëª…ì  ê²°í•¨)

---

### ğŸ”´ ì•½-ìŒì‹ ìƒí˜¸ì‘ìš©

| í…Œì´ë¸”ëª… | Version A | Version B | Version C | ì¤‘ìš”ë„ |
|---------|-----------|-----------|-----------|--------|
| `drug_food_interactions` | âŒ **ì—†ìŒ** | âœ… 50-100ê°œ | âœ… 50-100ê°œ | ğŸ”´ CRITICAL |

**ë¶„ì„**:
- Version AëŠ” **í•µì‹¬ ì°¨ë³„í™” ê¸°ëŠ¥ ëˆ„ë½**
- PROJECT_SPECIFICATION.mdì˜ ê°€ì¥ ì¤‘ìš”í•œ ê¸°ëŠ¥ ì¤‘ í•˜ë‚˜

**ìŠ¹ì**: Version B, C

---

### ğŸ”´ OCR & ì²˜ë°©ì „ ìŠ¤ìº”

| í…Œì´ë¸”ëª… | Version A | Version B | Version C | ì¤‘ìš”ë„ |
|---------|-----------|-----------|-----------|--------|
| `ocr_records` | âŒ **ì—†ìŒ** | âœ… Full | âœ… Full | ğŸ”´ HIGH |

**ë¶„ì„**:
- Version AëŠ” **Stage 4 í•„ìˆ˜ ê¸°ëŠ¥ ëˆ„ë½**
- OCR ì²˜ë°©ì „ ìŠ¤ìº”ì€ MVP í•µì‹¬ ê¸°ëŠ¥

**ìŠ¹ì**: Version B, C

---

### ğŸ”´ ì˜ì‚¬/AI ì±—ë´‡ ìƒë‹´

| í…Œì´ë¸”ëª… | Version A | Version B | Version C | ì¤‘ìš”ë„ |
|---------|-----------|-----------|-----------|--------|
| `counselors` | âŒ **ì—†ìŒ** | âœ… Doctor/AI | âœ… Doctor/AI | ğŸ”´ HIGH |
| `chat_rooms` | âŒ **ì—†ìŒ** | âœ… | âœ… | ğŸ”´ HIGH |
| `chat_messages` | âŒ **ì—†ìŒ** | âœ… WebSocket | âœ… WebSocket | ğŸ”´ HIGH |

**ë¶„ì„**:
- Version AëŠ” **ì±„íŒ… ê¸°ëŠ¥ ì™„ì „ ëˆ„ë½**
- ì˜ì‚¬ ìƒë‹´ì€ Stage 4 ì£¼ìš” ê¸°ëŠ¥

**ìŠ¹ì**: Version B, C

---

### ğŸŸ¢ ì§ˆë³‘ ê´€ë¦¬ ì‹œìŠ¤í…œ

| í…Œì´ë¸”ëª… | Version A | Version B | Version C | ì¤‘ìš”ë„ |
|---------|-----------|-----------|-----------|--------|
| `disease_info` | âœ… | âŒ **ì—†ìŒ** | âœ… | ğŸ”´ HIGH |
| `user_diseases` | âœ… | âŒ **ì—†ìŒ** | âœ… | ğŸ”´ HIGH |
| `disease_restrictions` | âœ… 3ê°œ ë¶„ë¦¬* | âŒ **ì—†ìŒ** | âœ… 1ê°œ í†µí•© | ğŸ”´ HIGH |
| `symptom_searches` | âœ… | âŒ **ì—†ìŒ** | âœ… | ğŸŸ¡ MEDIUM |
| `suspected_diseases` | âœ… AI ì§„ë‹¨ | âŒ **ì—†ìŒ** | âœ… AI ì§„ë‹¨ | ğŸŸ¡ MEDIUM |

*Version AëŠ” `disease_restricted_foods`, `disease_restricted_ingredients`, `disease_restricted_medications` 3ê°œë¡œ ë¶„ë¦¬

**ë¶„ì„**:
- Version A, CëŠ” ì§ˆë³‘ ê´€ë¦¬ ì™„ë²½ êµ¬í˜„
- Version BëŠ” **ì§ˆë³‘ ê´€ë¦¬ ì™„ì „ ëˆ„ë½** (ì¹˜ëª…ì !)
- Version CëŠ” 3ê°œ í…Œì´ë¸”ì„ 1ê°œë¡œ í†µí•© (ë” íš¨ìœ¨ì )

**ìŠ¹ì**: Version C (í†µí•© ì„¤ê³„ê°€ ìš°ìˆ˜)

---

### ğŸŸ¡ ì†Œì…œ & ì»¤ë®¤ë‹ˆí‹° ê¸°ëŠ¥

| í…Œì´ë¸”ëª… | Version A | Version B | Version C | ì¤‘ìš”ë„ |
|---------|-----------|-----------|-----------|--------|
| `medication_reviews` | âœ… | âŒ | âœ… | ğŸŸ¢ LOW |
| `hospital_diet_resources` | âœ… 2ê°œ* | âŒ | âœ… 1ê°œ | ğŸŸ¢ LOW |

*Version AëŠ” `hospital_diet_resources` + `hospital_diet_items` 2ê°œ

**ë¶„ì„**:
- ì†Œì…œ ê¸°ëŠ¥ì€ MVPì— í•„ìˆ˜ ì•„ë‹˜ (Phase 2)
- Version BëŠ” ìƒëµ (í•©ë¦¬ì  íŒë‹¨)
- Version CëŠ” í¬í•¨ (100% ì»¤ë²„ë¦¬ì§€)

**ìŠ¹ì**: Version C (ì™„ì „ì„±), Version Bë„ í•©ë¦¬ì 

---

### ğŸŸ¢ ë¦¬í¬íŒ… & ë¶„ì„

| í…Œì´ë¸”ëª… | Version A | Version B | Version C | ì¤‘ìš”ë„ |
|---------|-----------|-----------|-----------|--------|
| `adherence_reports` | âŒ | âœ… PDF ì¶œë ¥ | âœ… PDF ì¶œë ¥ | ğŸŸ¡ MEDIUM |

**ë¶„ì„**:
- Version AëŠ” **ë¦¬í¬íŒ… ê¸°ëŠ¥ ì—†ìŒ**
- ê°€ì¡± ëŒë´„ì— ì¤‘ìš”í•œ ê¸°ëŠ¥

**ìŠ¹ì**: Version B, C

---

### â­ Version Cë§Œì˜ ì¶”ê°€ ê¸°ëŠ¥

| í…Œì´ë¸”ëª… | Version A | Version B | Version C | ì¤‘ìš”ë„ |
|---------|-----------|-----------|-----------|--------|
| `pharmacies` | âŒ | âŒ | âœ… **GIS ê²€ìƒ‰** | ğŸŸ¢ LOW |

**ë¶„ì„**:
- ì•½êµ­ ì°¾ê¸° ê¸°ëŠ¥ (GPS ê¸°ë°˜)
- PROJECT_SPECIFICATION.mdì—ì„œ "ìš°ì„ ìˆœìœ„ ë‚®ìŒ"ìœ¼ë¡œ ëª…ì‹œ
- Google Maps API ì—°ë™ìš©
- Version Cë§Œì˜ **ë³´ë„ˆìŠ¤ ê¸°ëŠ¥**

---

## ğŸ¯ ê¸°ëŠ¥ ì»¤ë²„ë¦¬ì§€ ë§¤íŠ¸ë¦­ìŠ¤

### PROJECT_SPECIFICATION.md í•µì‹¬ ê¸°ëŠ¥ ì²´í¬

| ê¸°ëŠ¥ | Version A | Version B | Version C |
|------|-----------|-----------|-----------|
| **1. Kakao OAuth ë¡œê·¸ì¸** | âŒ **ì¹˜ëª…ì ** | âœ… | âœ… |
| **2. ê°€ì¡± ëŒë´„ ë„¤íŠ¸ì›Œí¬** | âœ… ê¸°ë³¸ | âœ… Hocuspocus | âœ… Hocuspocus |
| **3. ì•½-ìŒì‹ ì¶©ëŒ ê²½ê³ ** | âŒ **ì¹˜ëª…ì ** | âœ… 50-100ê°œ | âœ… 50-100ê°œ |
| **4. OCR ì²˜ë°©ì „ ìŠ¤ìº”** | âŒ **ì—†ìŒ** | âœ… Google Vision | âœ… Google Vision |
| **5. ì•Œì•½ ì—­ê²€ìƒ‰** | âš ï¸ ì™¸ë¶€ API | âš ï¸ ì™¸ë¶€ API | âš ï¸ ì™¸ë¶€ API |
| **6. ë³µì•½ ìˆœì‘ë„ ë¦¬í¬íŠ¸** | âŒ **ì—†ìŒ** | âœ… PDF | âœ… PDF |
| **7. ì˜ì‚¬/AI ì±—ë´‡ ìƒë‹´** | âŒ **ì—†ìŒ** | âœ… WebSocket | âœ… WebSocket |
| **8. ì¦ìƒ ê²€ìƒ‰ & AI ì§„ë‹¨** | âœ… | âŒ **ì—†ìŒ** | âœ… |
| **9. ì§ˆë³‘ ê´€ë¦¬** | âœ… | âŒ **ì—†ìŒ** | âœ… |
| **10. ì•½ ë¦¬ë·° (ì†Œì…œ)** | âœ… | âŒ | âœ… |
| **11. ë³‘ì› ì‹ë‹¨ ê°€ì´ë“œ** | âœ… | âŒ | âœ… |
| **12. ì•½êµ­ ì°¾ê¸° (GIS)** | âŒ | âŒ | âœ… |

**ì ìˆ˜**:
- Version A: **5/12 (42%)** - ì¹˜ëª…ì  ê²°í•¨ 3ê°œ
- Version B: **7/12 (58%)** - ì§ˆë³‘ ê´€ë¦¬ ëˆ„ë½
- Version C: **12/12 (100%)** â­ **ì™„ë²½**

---

## ğŸš¨ ì¹˜ëª…ì  ê²°í•¨ ë¶„ì„

### Version Aì˜ ì¹˜ëª…ì  ë¬¸ì œ

```
âŒ Kakao OAuth í…Œì´ë¸” ì—†ìŒ
   â†’ ë¡œê·¸ì¸ ìì²´ê°€ ë¶ˆê°€ëŠ¥
   â†’ MVP ì‚¬ìš© ë¶ˆê°€

âŒ ì•½-ìŒì‹ ì¶©ëŒ DB ì—†ìŒ
   â†’ í•µì‹¬ ì°¨ë³„í™” ê¸°ëŠ¥ ëˆ„ë½
   â†’ ê²½ìŸì‚¬ì™€ ì°¨ë³„ì  ì—†ìŒ

âŒ OCR ê¸°ëŠ¥ ì—†ìŒ
   â†’ Stage 4 í•„ìˆ˜ ê¸°ëŠ¥ ëˆ„ë½
   â†’ ì²˜ë°©ì „ ìŠ¤ìº” ë¶ˆê°€

âŒ ì±„íŒ… ê¸°ëŠ¥ ì—†ìŒ
   â†’ ì˜ì‚¬ ìƒë‹´ ë¶ˆê°€
   â†’ ì¤‘ìš” ê¸°ëŠ¥ ëˆ„ë½

âŒ ë¦¬í¬íŒ… ì—†ìŒ
   â†’ ê°€ì¡±ì—ê²Œ ìˆœì‘ë„ ë³´ê³  ë¶ˆê°€
```

**ê²°ë¡ **: Version AëŠ” **MVPë¡œ ì‚¬ìš© ë¶ˆê°€ëŠ¥**

---

### Version Bì˜ ì¹˜ëª…ì  ë¬¸ì œ

```
âŒ ì§ˆë³‘ ê´€ë¦¬ ì‹œìŠ¤í…œ ì—†ìŒ
   â†’ disease_info, user_diseases ëˆ„ë½
   â†’ ì§ˆë³‘ë³„ ì œí•œì‚¬í•­ ì²´í¬ ë¶ˆê°€
   â†’ MyDiseasesPage êµ¬í˜„ ë¶ˆê°€
   â†’ DiseaseRestrictionsPage êµ¬í˜„ ë¶ˆê°€
   â†’ SymptomSearchPage êµ¬í˜„ ë¶ˆê°€

âŒ ì¦ìƒ ê²€ìƒ‰ & AI ì§„ë‹¨ ì—†ìŒ
   â†’ symptom_searches, suspected_diseases ëˆ„ë½
   â†’ ì°¸ì‹ í•œ ê¸°ëŠ¥ ëˆ„ë½
```

**ê²°ë¡ **: Version BëŠ” **ì§ˆë³‘ ê´€ë¦¬ ì¶”ê°€ í•„ìš”** (80% ì™„ì„±)

---

### Version Cì˜ ë¬¸ì œ

```
âœ… ë¬¸ì œ ì—†ìŒ
âœ… ëª¨ë“  ê¸°ëŠ¥ 100% ì»¤ë²„
âœ… ì¶”ê°€ ë³´ë„ˆìŠ¤ ê¸°ëŠ¥ (ì•½êµ­ GIS)
```

**ê²°ë¡ **: Version CëŠ” **ì™„ë²½í•¨**

---

## ğŸ“ˆ í…Œì´ë¸” ìˆ˜ ë¹„êµ

| ë²„ì „ | í…Œì´ë¸” ìˆ˜ | ë¹„ê³  |
|------|----------|------|
| Version A | ~19ê°œ | OAuth/JWT/OCR/Chat ì—†ìŒ |
| Version B | 18ê°œ | ì§ˆë³‘ ê´€ë¦¬ ì—†ìŒ |
| Version C | **26ê°œ** | ëª¨ë“  ê¸°ëŠ¥ í¬í•¨ |

---

## ğŸ¨ ì„¤ê³„ í’ˆì§ˆ ë¹„êµ

### ì¸ë±ìŠ¤ ìµœì í™”

| ë²„ì „ | ì¸ë±ìŠ¤ ìˆ˜ | ë¹„ê³  |
|------|----------|------|
| Version A | ë¶ˆëª… | Mermaid í˜•ì‹ (ìƒì„¸ ë¶ˆëª…) |
| Version B | ~50ê°œ | ê¸°ë³¸ ì¸ë±ìŠ¤ |
| Version C | **150+ê°œ** | ë³µí•© ì¸ë±ìŠ¤, GIS ì¸ë±ìŠ¤ í¬í•¨ |

### ê´€ê³„ ì •ì˜

| ë²„ì „ | Foreign Key | Cascade ê·œì¹™ |
|------|-------------|--------------|
| Version A | ë¶ˆëª… | Mermaid ì œì•½ |
| Version B | ~40ê°œ | ê¸°ë³¸ ê·œì¹™ |
| Version C | **68ê°œ** | ìƒì„¸ cascade ê·œì¹™ |

### ë³´ì•ˆ & ê·œì • ì¤€ìˆ˜

| í•­ëª© | Version A | Version B | Version C |
|------|-----------|-----------|-----------|
| **OAuth ì§€ì›** | âŒ | âœ… | âœ… |
| **JWT ê´€ë¦¬** | âŒ | âœ… | âœ… |
| **GDPR ê°ì‚¬ ë¡œê·¸** | âŒ | âœ… | âœ… |
| **ì•”í˜¸í™” ëª…ì‹œ** | âŒ | âš ï¸ ë¶€ë¶„ | âœ… AES-256 |
| **Multi-device ì§€ì›** | âŒ | âœ… | âœ… |

---

## ğŸ† ìµœì¢… í‰ê°€

### ì¢…í•© ì ìˆ˜

| í‰ê°€ í•­ëª© | Version A | Version B | Version C |
|----------|-----------|-----------|-----------|
| **ê¸°ëŠ¥ ì»¤ë²„ë¦¬ì§€** | 42% (5/12) | 58% (7/12) | **100%** (12/12) |
| **MVP ì í•©ì„±** | âŒ ë¶ˆê°€ëŠ¥ | âš ï¸ 80% | âœ… **ì™„ë²½** |
| **ì¸ì¦ ì‹œìŠ¤í…œ** | âŒ ì—†ìŒ | âœ… ì™„ë²½ | âœ… ì™„ë²½ |
| **í•µì‹¬ ì°¨ë³„í™” ê¸°ëŠ¥** | âŒ ì—†ìŒ | âœ… ì™„ë²½ | âœ… ì™„ë²½ |
| **ì§ˆë³‘ ê´€ë¦¬** | âœ… ì™„ë²½ | âŒ ì—†ìŒ | âœ… **í–¥ìƒë¨** |
| **ì†Œì…œ ê¸°ëŠ¥** | âœ… ìˆìŒ | âŒ ì—†ìŒ | âœ… ìˆìŒ |
| **ì„¤ê³„ í’ˆì§ˆ** | âš ï¸ ê¸°ë³¸ | âœ… ìš°ìˆ˜ | âœ… **ìµœê³ ** |
| **í™•ì¥ì„±** | âš ï¸ ë‚®ìŒ | âœ… ìš°ìˆ˜ | âœ… **ìµœê³ ** |

### ë“±ê¸‰

| ë²„ì „ | ë“±ê¸‰ | í‰ê°€ |
|------|------|------|
| Version A | **F (ì‹¤íŒ¨)** | OAuth ì—†ì–´ ì‚¬ìš© ë¶ˆê°€ |
| Version B | **B (ì–‘í˜¸)** | ì§ˆë³‘ ê´€ë¦¬ë§Œ ì¶”ê°€í•˜ë©´ ë¨ |
| Version C | **A+ (ì™„ë²½)** | ëª¨ë“  ìš”êµ¬ì‚¬í•­ ì¶©ì¡± |

---

## ğŸ¯ ìµœì¢… ê¶Œì¥ì•ˆ

### 1ìˆœìœ„: **Version C ì±„íƒ** â­â­â­â­â­

**ì´ìœ **:
âœ… **100% ê¸°ëŠ¥ ì»¤ë²„ë¦¬ì§€** - ëª¨ë“  ìš”êµ¬ì‚¬í•­ ì¶©ì¡±
âœ… **ì„¤ê³„ í’ˆì§ˆ ìµœê³ ** - 150+ ì¸ë±ìŠ¤, 68ê°œ FK
âœ… **ë³´ì•ˆ ì™„ë²½** - OAuth, JWT, ê°ì‚¬ ë¡œê·¸
âœ… **í™•ì¥ì„± ìš°ìˆ˜** - GIS, ì†Œì…œ ê¸°ëŠ¥ í¬í•¨
âœ… **Production-ready** - ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥

**ë‹¨ì **:
âš ï¸ í…Œì´ë¸” ìˆ˜ ë§ìŒ (26ê°œ) â†’ ì´ˆê¸° êµ¬í˜„ ì‹œê°„ ì¦ê°€
âš ï¸ ì¼ë¶€ ê¸°ëŠ¥ì€ Phase 2ì— ë¯¸ë¤„ë„ ë¨

**ê¶Œì¥ ì‚¬í•­**:
```
Phase 1 (MVP): 23ê°œ í…Œì´ë¸”
- medication_reviews ì œì™¸
- hospital_diet_resources ì œì™¸
- pharmacies ì œì™¸

Phase 2: ë‚˜ë¨¸ì§€ 3ê°œ ì¶”ê°€
```

---

### 2ìˆœìœ„: **Version B + ì§ˆë³‘ ê´€ë¦¬ 5ê°œ í…Œì´ë¸” ì¶”ê°€**

**ì´ìœ **:
âœ… í•µì‹¬ ê¸°ëŠ¥ 80% êµ¬í˜„ë¨
âœ… OAuth, OCR, Chat ì™„ë²½
âœ… ì•½-ìŒì‹ ì¶©ëŒ ì™„ë²½
âš ï¸ ì§ˆë³‘ ê´€ë¦¬ë§Œ ì¶”ê°€í•˜ë©´ ë¨

**ì¶”ê°€í•  í…Œì´ë¸”** (ERD_COMPARISON_ANALYSIS.md ì°¸ì¡°):
1. `disease_info`
2. `user_diseases`
3. `disease_restrictions`
4. `symptom_searches`
5. `suspected_diseases`

**ê²°ê³¼**: 23ê°œ í…Œì´ë¸” (Version C Phase 1ê³¼ ë™ì¼)

---

### 3ìˆœìœ„: Version AëŠ” **íê¸°**

**ì´ìœ **:
âŒ Kakao OAuth ì—†ìŒ â†’ ë¡œê·¸ì¸ ë¶ˆê°€
âŒ ì•½-ìŒì‹ ì¶©ëŒ ì—†ìŒ â†’ ì°¨ë³„í™” ë¶ˆê°€
âŒ OCR ì—†ìŒ â†’ Stage 4 ì‹¤íŒ¨
âŒ Chat ì—†ìŒ â†’ ì£¼ìš” ê¸°ëŠ¥ ëˆ„ë½
âŒ ìˆ˜ì • ë¹„ìš©ì´ ìƒˆë¡œ ë§Œë“œëŠ” ê²ƒë³´ë‹¤ í¼

**ê²°ë¡ **: Version AëŠ” **ì°¸ê³ ìš©ìœ¼ë¡œë§Œ ì‚¬ìš©**

---

## ğŸ“Š ë¹ ì§„ ê¸°ëŠ¥ ìƒì„¸ ë¶„ì„

### Version Aì—ì„œ ë¹ ì§„ ê²ƒ (8ê°œ)

```
ğŸ”´ CRITICAL (ì¦‰ì‹œ í•„ìš”):
1. oauth_providers          - Kakao OAuth
2. refresh_tokens           - JWT ê´€ë¦¬
3. drug_food_interactions   - ì•½-ìŒì‹ ì¶©ëŒ
4. ocr_records             - ì²˜ë°©ì „ OCR
5. counselors              - ì˜ì‚¬/AI ì±—ë´‡
6. chat_rooms              - ìƒë‹´ë°©
7. chat_messages           - ì±„íŒ… ë©”ì‹œì§€
8. adherence_reports       - ìˆœì‘ë„ ë¦¬í¬íŠ¸
```

---

### Version Bì—ì„œ ë¹ ì§„ ê²ƒ (5ê°œ)

```
ğŸ”´ HIGH (ì§ˆë³‘ ê´€ë¦¬):
1. disease_info            - ì§ˆë³‘ ë§ˆìŠ¤í„° DB
2. user_diseases           - ì‚¬ìš©ì ì§ˆë³‘
3. disease_restrictions    - ì§ˆë³‘ë³„ ì œí•œì‚¬í•­

ğŸŸ¡ MEDIUM (AI ì§„ë‹¨):
4. symptom_searches        - ì¦ìƒ ê²€ìƒ‰
5. suspected_diseases      - AI ì¶”ì²œ ì§ˆë³‘

ğŸŸ¢ LOW (ì†Œì…œ):
6. medication_reviews      - ì•½ ë¦¬ë·°
7. hospital_diet_resources - ë³‘ì› ì‹ë‹¨
8. pharmacies             - ì•½êµ­ ê²€ìƒ‰
```

---

### Version Cì—ì„œ ë¹ ì§„ ê²ƒ

```
âœ… ì—†ìŒ (100% ì™„ë²½)
```

---

## ğŸ”„ ë§ˆì´ê·¸ë ˆì´ì…˜ ì „ëµ

### Version A â†’ Cë¡œ ì´ë™ ì‹œ

```sql
-- 1. ì‹ ê·œ í…Œì´ë¸” ì¶”ê°€ (8ê°œ)
CREATE TABLE oauth_providers ...
CREATE TABLE refresh_tokens ...
CREATE TABLE drug_food_interactions ...
CREATE TABLE ocr_records ...
CREATE TABLE counselors ...
CREATE TABLE chat_rooms ...
CREATE TABLE chat_messages ...
CREATE TABLE adherence_reports ...

-- 2. ê¸°ì¡´ í…Œì´ë¸” ë§ˆì´ê·¸ë ˆì´ì…˜
ALTER TABLE users ADD COLUMN kakao_id ...
ALTER TABLE family_groups ADD COLUMN sync_document_id ...

-- 3. í…Œì´ë¸” í†µí•©
-- disease_restricted_* 3ê°œ â†’ disease_restrictions 1ê°œ
INSERT INTO disease_restrictions
  SELECT * FROM disease_restricted_foods UNION ALL
  SELECT * FROM disease_restricted_ingredients UNION ALL
  SELECT * FROM disease_restricted_medications;

-- 4. hospital_diet_items â†’ hospital_diet_resources í†µí•©
```

**ì˜ˆìƒ ì‹œê°„**: 2-3ì¼ (ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜ í¬í•¨)

---

### Version B â†’ Cë¡œ ì´ë™ ì‹œ

```sql
-- 1. ì§ˆë³‘ ê´€ë¦¬ ì¶”ê°€ (5ê°œ)
CREATE TABLE disease_info ...
CREATE TABLE user_diseases ...
CREATE TABLE disease_restrictions ...
CREATE TABLE symptom_searches ...
CREATE TABLE suspected_diseases ...

-- 2. ì„ íƒì  ì¶”ê°€ (3ê°œ, Phase 2)
CREATE TABLE medication_reviews ...
CREATE TABLE hospital_diet_resources ...
CREATE TABLE pharmacies ...

-- 3. ê¸°ì¡´ í…Œì´ë¸”ì€ ê·¸ëŒ€ë¡œ ìœ ì§€ (ë³€ê²½ ì—†ìŒ)
```

**ì˜ˆìƒ ì‹œê°„**: 1ì¼ (í…Œì´ë¸” ì¶”ê°€ë§Œ)

---

## ğŸ“ ìš”ì•½ ë° ê²°ë¡ 

### í•µì‹¬ ë°œê²¬

1. **Version AëŠ” MVP ë¶ˆê°€ëŠ¥**
   - OAuth ì—†ìŒ = ë¡œê·¸ì¸ ë¶ˆê°€
   - í•µì‹¬ ê¸°ëŠ¥ 50% ì´ìƒ ëˆ„ë½

2. **Version BëŠ” 80% ì™„ì„±**
   - í•µì‹¬ ì°¨ë³„í™” ê¸°ëŠ¥ ì™„ë²½
   - ì§ˆë³‘ ê´€ë¦¬ë§Œ ì¶”ê°€í•˜ë©´ ë¨

3. **Version CëŠ” 100% ì™„ë²½**
   - ëª¨ë“  ê¸°ëŠ¥ í¬í•¨
   - ì„¤ê³„ í’ˆì§ˆ ìµœê³ 
   - Production-ready

---

### ìµœì¢… ê¶Œì¥

```
âœ… ì±„íƒ: Version C (DATABASE_ERD_V3.dbml)

Phase 1 (6ì£¼): 23ê°œ í…Œì´ë¸”
- ì†Œì…œ ê¸°ëŠ¥ 3ê°œ ì œì™¸
- í•µì‹¬ ê¸°ëŠ¥ 100% êµ¬í˜„

Phase 2 (2ì£¼): ë‚˜ë¨¸ì§€ 3ê°œ ì¶”ê°€
- medication_reviews
- hospital_diet_resources
- pharmacies
```

---

**ë¶„ì„ ì™„ë£Œì¼**: 2025-11-10
**ë¶„ì„ì**: Claude Code
**ê¶Œì¥ ì•¡ì…˜**: Version C ì¦‰ì‹œ ì±„íƒ, dbdiagram.io ì—…ë¡œë“œ ë° ë°±ì—”ë“œ íŒ€ ê³µìœ 
