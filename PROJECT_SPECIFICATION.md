# AMA...Pill - ê°€ì¡± ëŒë´„ ì¤‘ì‹¬ ì•½ ê´€ë¦¬ í”Œë«í¼

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

### í”„ë¡œì íŠ¸ ëª…
**AMA...Pill (AMA...Pill)** - "ì•½ ë¨¹ì„ ì‹œê°„ì´ì—ìš”?"

### íŒ€ êµ¬ì„±
- **íŒ€ì›**: 3ëª…
- **í”„ë¡œì íŠ¸ ê¸°ê°„**: 2025ë…„ 11ì›” 5ì¼ ~ 12ì›” 31ì¼ (ì•½ 8ì£¼)
- **ë°œí‘œì¼**: 2025ë…„ 12ì›” 31ì¼
- **ì‹¤ì œ ê°œë°œ ê¸°ê°„**: ì•½ 7ì£¼ (ë°œí‘œ ì¤€ë¹„ ì œì™¸)

### í”„ë¡œì íŠ¸ ëª©í‘œ
í˜¼ì ì‚¬ì‹œëŠ” ë¶€ëª¨ë‹˜ì˜ **ì•½ ë³µìš© ê´€ë¦¬**ë¥¼ ìë…€ê°€ ì›ê²©ìœ¼ë¡œ ëŒë³¼ ìˆ˜ ìˆëŠ” **ê°€ì¡± ëŒë´„ ë„¤íŠ¸ì›Œí¬** í”Œë«í¼.
ê¸°ì¡´ ê°œì¸ìš© ì•½ ê´€ë¦¬ ì•±ê³¼ ë‹¬ë¦¬, **ì‹œë‹ˆì–´(ë¶€ëª¨ë‹˜) + ì¼€ì–´ê¸°ë²„(ìë…€)** ì–‘ë©´ ì‹œì¥ì„ ê³µëµí•˜ëŠ” ì°¨ë³„í™”ëœ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

### í•µì‹¬ ê°€ì¹˜ ì œì•ˆ
> "ë¶€ëª¨ë‹˜ì´ ì•½ì„ ì•ˆ ë“œì…¨ì–´ìš”!" - ë–¨ì–´ì ¸ ìˆì–´ë„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¼€ì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ—ï¸ ê¸°ìˆ  ìŠ¤íƒ

### Frontend
- **Framework**: React (JavaScript + JSX) â­ **React Native ì‚¬ìš© ê¸ˆì§€**
- **ë²ˆë“¤ëŸ¬**: Vite
- **ì‹¤ì‹œê°„ ë™ê¸°í™”**: Hocuspocus + TipTap (ê°€ì¡± ê°„ ë°ì´í„° ê³µìœ )
- **ìƒíƒœ ê´€ë¦¬**: Zustand (ì „ì—­) + React Query (ì„œë²„ ìƒíƒœ)
- **ìŠ¤íƒ€ì¼ë§**: SCSS Modules + Tailwind CSS

### Backend
- **Language**: Java 21 LTS (2029ë…„ê¹Œì§€ ì§€ì›, Virtual Threads, ZGC)
- **Framework**: Spring Boot 3.4.7 (ì•ˆì • ë²„ì „, 49ê°œ ë²„ê·¸ ìˆ˜ì •)
- **Cloud**: Spring Cloud 2024.0.2 (Moorgate, Spring Boot 3.4.x í˜¸í™˜)
- **ë³´ì•ˆ**: Spring Security (JWT ì¸ì¦)
- **AI í†µí•©**: Spring AI (OCR, ì•½-ìŒì‹ ì¶©ëŒ ë¶„ì„)
- **ë©”ì‹œì§•**: Apache Kafka (ì´ë²¤íŠ¸ ê¸°ë°˜ ì•Œë¦¼ ì²˜ë¦¬)
- **ì›Œí¬í”Œë¡œìš° ìë™í™”**: n8n (ì•Œë¦¼ ìŠ¤ì¼€ì¤„ë§)

### Database
- **ê´€ê³„í˜• DB**: MySQL / PostgreSQL (ê²°ì • í•„ìš”)
- **ìºì‹±/ì„¸ì…˜**: Redis
- **ì‹¤ì‹œê°„ ë™ê¸°í™”**: Hocuspocus (WebSocket ê¸°ë°˜)

### ì™¸ë¶€ API ë° ì„œë¹„ìŠ¤
- **OCR**: Google Cloud Vision API (ë¬´ë£Œ í•œë„ 1,000ê±´/ì›”) / Tesseract.js (ë¬´ë£Œ, ë³´ì¡°ìš©)
  - âš ï¸ Naver Clova OCRì€ ìœ ë£Œ(ê¸°ë³¸ ìœ ì§€ë¹„ ë°œìƒ)ë¡œ ì œì™¸
- **ì•Œë¦¼**: ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ API (Phase 2)
- **ê³µê³µ API**: ì‹ì•½ì²˜ ì˜ì•½í’ˆì•ˆì „ë‚˜ë¼ API (ë¬´ë£Œ, ê³µê³µë°ì´í„°í¬í„¸)

---

## ğŸ”¥ í•µì‹¬ ì°¨ë³„í™” ê¸°ëŠ¥ (ì°¸ì‹ í•œ ê¸°ëŠ¥!)

### 1. **ê°€ì¡± ëŒë´„ ë„¤íŠ¸ì›Œí¬** â­â­â­â­â­ (í•µì‹¬ ì°¨ë³„ì !)

#### í˜„ì‹¤ì  ë¬¸ì œ
- í˜¼ì ì‚¬ì‹œëŠ” ë¶€ëª¨ë‹˜ì´ ì•½ì„ ì˜ ì•ˆ ë“œì‹¬
- ìë…€ê°€ ì±™ê²¨ë“œë¦¬ê³  ì‹¶ì§€ë§Œ ë¬¼ë¦¬ì ìœ¼ë¡œ ë©€ë¦¬ ë–¨ì–´ì§
- ë¶€ëª¨ë‹˜ì€ ì•± ì‚¬ìš©ì´ ì–´ë ¤ì›€
- **ê¸°ì¡´ ì•±ì€ ëª¨ë‘ ê°œì¸ìš©, ê°€ì¡± ì—°ë™ ì—†ìŒ**

#### ì†”ë£¨ì…˜: ì‹¤ì‹œê°„ ê°€ì¡± ì¼€ì–´ ì‹œìŠ¤í…œ
```
[ì‹œë‚˜ë¦¬ì˜¤]
1. ìë…€ê°€ ë¶€ëª¨ë‹˜ ê³„ì •ì— ì›ê²©ìœ¼ë¡œ ì•½ ìŠ¤ì¼€ì¤„ ë“±ë¡
   (ë¶€ëª¨ë‹˜ì€ ë³µì¡í•œ ì„¤ì • ë¶ˆí•„ìš”)

2. ë¶€ëª¨ë‹˜ ì›¹ì•±ì— TODO ë¦¬ìŠ¤íŠ¸ í˜•íƒœë¡œ í‘œì‹œ:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ì˜¤ëŠ˜ì˜ ì•½ ë³µìš©           â”‚
   â”‚                          â”‚
   â”‚ â˜ ì•„ì¹¨ ì‹í›„              â”‚
   â”‚   í˜ˆì••ì•½ (ì•„ëª¨ë””í•€) 1ì•Œ   â”‚
   â”‚                          â”‚
   â”‚ â˜ ì ì‹¬ ì‹í›„              â”‚
   â”‚   ë‹¹ë‡¨ì•½ (ë©”íŠ¸í¬ë¥´ë¯¼) 1ì•Œ â”‚
   â”‚                          â”‚
   â”‚ â˜ ì €ë… ì‹í›„              â”‚
   â”‚   ê³ ì§€í˜ˆì¦ì•½ (ì•„í† ë¥´ë°”) 1ì•Œâ”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. ë¶€ëª¨ë‹˜ì´ ì²´í¬ë°•ìŠ¤ í´ë¦­ â†’ ë³µìš© ì™„ë£Œ
   â†’ Hocuspocusë¡œ ì‹¤ì‹œê°„ ë™ê¸°í™”

4. ìë…€ ì•±ì— ì¦‰ì‹œ ì•Œë¦¼:
   "ì–´ë¨¸ë‹ˆê°€ ì˜¤í›„ 2ì‹œ í˜ˆì••ì•½ì„ ë³µìš© ì™„ë£Œí–ˆìŠµë‹ˆë‹¤ âœ“"

5. 3ì‹œê°„ ì§€ë‚˜ë„ ì²´í¬ ì•ˆ í•˜ë©´:
   â†’ ìë…€ì—ê²Œ ê¸´ê¸‰ ì•Œë¦¼ ë°œì†¡
   "ì–´ë¨¸ë‹ˆê°€ ì ì‹¬ ì•½ì„ ì•„ì§ ë“œì‹œì§€ ì•Šì•˜ìŠµë‹ˆë‹¤!"
```

#### ê¸°ìˆ  êµ¬í˜„
```javascript
// Hocuspocus Providerë¡œ ì‹¤ì‹œê°„ ë™ê¸°í™”
const provider = new HocuspocusProvider({
  url: 'ws://your-server.com',
  name: 'family-group-{family_id}', // ê°€ì¡± ê·¸ë£¹ë³„ ë…ë¦½ ê³µê°„
});

// ë¶€ëª¨ë‹˜ì´ ì²´í¬ë°•ìŠ¤ í´ë¦­ ì‹œ
const completeMedication = (medId) => {
  // 1. ë¡œì»¬ ìƒíƒœ ì—…ë°ì´íŠ¸
  updateMedicationLog(medId, { completed: true, timestamp: now() });

  // 2. Hocuspocusê°€ ìë™ìœ¼ë¡œ ëª¨ë“  ê°€ì¡± êµ¬ì„±ì›ì—ê²Œ ë™ê¸°í™”

  // 3. Kafka ì´ë²¤íŠ¸ ë°œí–‰ â†’ ìë…€ì—ê²Œ ì•Œë¦¼
  kafka.publish('medication.completed', {
    userId: parentId,
    medName: 'í˜ˆì••ì•½',
    timestamp: now()
  });
};
```

#### ì°¨ë³„ì 
- âœ… **ê¸°ì¡´ ì•± ì—†ìŒ**: ì•½ ê´€ë¦¬ ì•±ì€ ëª¨ë‘ ê°œì¸ìš©
- âœ… **Hocuspocus í™œìš©**: ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ê¸°ìˆ  ìŠ¤íƒê³¼ ì™„ë²½ ë§¤ì¹˜
- âœ… **ì–‘ë©´ ì‹œì¥**: ì‹œë‹ˆì–´(ì‚¬ìš©ì) + ìë…€(ì¼€ì–´ê¸°ë²„) ë™ì‹œ ê³µëµ
- âœ… **ì‹¤ìš©ì„±**: ì‹¤ì œ í˜ì¸í¬ì¸íŠ¸ í•´ê²°

---

### 2. **ì•½-ìŒì‹ ì¶©ëŒ ì‹¤ì‹œê°„ ê²½ê³ ** â­â­â­â­â­

#### í˜„ì‹¤ì  ë¬¸ì œ
- ì™€íŒŒë¦°(í˜ˆì•¡í¬ì„ì œ) + ë¹„íƒ€ë¯¼K ìŒì‹ = ì•½íš¨ ê°ì†Œ
- ì¹¼ìŠ˜ì±„ë„ì°¨ë‹¨ì œ + ìëª½ = í˜ˆì•• ê¸‰ê°•í•˜ ìœ„í—˜
- **í™˜ìë“¤ì´ ì´ëŸ° ìƒí˜¸ì‘ìš©ì„ ì „í˜€ ëª¨ë¦„**
- **ê¸°ì¡´ ì•±ì€ ì•½-ì•½ ìƒí˜¸ì‘ìš©ë§Œ ì²´í¬, ì•½-ìŒì‹ ì¶©ëŒì€ ê±°ì˜ ì—†ìŒ!**

#### ì†”ë£¨ì…˜: ì‹ë‹¨ ì…ë ¥ ì‹œ ìë™ ê²½ê³ 
```
[ì‹œë‚˜ë¦¬ì˜¤]
ì‚¬ìš©ì: "ì ì‹¬ì— ì‹œê¸ˆì¹˜ ë‚˜ë¬¼ ë¨¹ìŒ" ì…ë ¥

ì‹œìŠ¤í…œ:
âš ï¸ ì£¼ì˜ í•„ìš”
í˜„ì¬ ë³µìš© ì¤‘ì¸ ì™€íŒŒë¦°ê³¼ ìƒí˜¸ì‘ìš© ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤.

ğŸ“Œ ìƒì„¸ ì •ë³´:
- ì‹œê¸ˆì¹˜ëŠ” ë¹„íƒ€ë¯¼Kê°€ í’ë¶€í•©ë‹ˆë‹¤
- ë¹„íƒ€ë¯¼KëŠ” í˜ˆì•¡ ì‘ê³ ë¥¼ ì´‰ì§„í•˜ì—¬ ì™€íŒŒë¦°ì˜ í˜ˆì•¡ í¬ì„ íš¨ê³¼ë¥¼ ê°ì†Œì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤
- ê³¼ëŸ‰ ì„­ì·¨ë¥¼ í”¼í•˜ê³ , ì„­ì·¨ ì‹œ ì•½íš¨ ë³€í™”ì— ì£¼ì˜í•´ì£¼ì„¸ìš”

ğŸ’¡ ì¶”ì²œ:
- ë¹„íƒ€ë¯¼K í•¨ëŸ‰ì´ ë‚®ì€ ëŒ€ì²´ ì±„ì†Œ: ì˜¤ì´, ë‹¹ê·¼, ê°€ì§€
```

#### ê¸°ìˆ  êµ¬í˜„ (êµ¬ì²´ì  ë‹¨ê³„)

**Step 1: ì•½-ìŒì‹ ìƒí˜¸ì‘ìš© ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¶•**
```javascript
// ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (MySQL/PostgreSQL)
/*
CREATE TABLE drug_food_interactions (
  id INT PRIMARY KEY AUTO_INCREMENT,
  drug_name VARCHAR(255) NOT NULL,
  drug_ingredient VARCHAR(255),       -- ì£¼ì„±ë¶„ (ì˜ˆ: ì™€íŒŒë¦°)
  food_name VARCHAR(255) NOT NULL,    -- í”¼í•´ì•¼ í•  ìŒì‹
  food_category VARCHAR(100),         -- ìŒì‹ ì¹´í…Œê³ ë¦¬
  conflict_ingredient VARCHAR(255),   -- ì¶©ëŒ ì„±ë¶„ (ì˜ˆ: ë¹„íƒ€ë¯¼K)
  reason TEXT,                        -- ìƒí˜¸ì‘ìš© ì´ìœ 
  severity ENUM('ë†’ìŒ', 'ì¤‘ê°„', 'ë‚®ìŒ'),
  alternatives TEXT,                  -- ëŒ€ì²´ ìŒì‹ (JSON)
  source VARCHAR(500),                -- ì¶œì²˜ (ì‹ì•½ì²˜, ë³‘ì› ë“±)
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_drug_name ON drug_food_interactions(drug_name);
CREATE INDEX idx_food_name ON drug_food_interactions(food_name);
*/

// ì´ˆê¸° ë°ì´í„° (50~100ê°œ ì£¼ìš” ì•½ë¬¼ ìƒí˜¸ì‘ìš©)
const drugFoodInteractionsData = [
  // í•­ì‘ê³ ì œ
  {
    drugName: 'ì™€íŒŒë¦°',
    drugIngredient: 'Warfarin',
    foods: ['ì‹œê¸ˆì¹˜', 'ì²­ê²½ì±„', 'ì¼€ì¼', 'ë¸Œë¡œì½œë¦¬', 'íŒŒìŠ¬ë¦¬', 'ê¹»ì', 'ë¯¸ì—­', 'ê¹€'],
    conflictIngredient: 'ë¹„íƒ€ë¯¼K',
    reason: 'ë¹„íƒ€ë¯¼KëŠ” í˜ˆì•¡ ì‘ê³ ë¥¼ ì´‰ì§„í•˜ì—¬ ì™€íŒŒë¦°ì˜ í•­ì‘ê³  íš¨ê³¼ë¥¼ ê°ì†Œì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê³¼ëŸ‰ ì„­ì·¨ ì‹œ í˜ˆì „ ìœ„í—˜ì´ ì¦ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
    severity: 'ë†’ìŒ',
    alternatives: ['ì˜¤ì´', 'ë‹¹ê·¼', 'ê°€ì§€', 'ì–‘íŒŒ', 'ë²„ì„¯'],
    source: 'ì‹ì•½ì²˜, ì‚¼ì„±ì„œìš¸ë³‘ì›'
  },

  // í˜ˆì••ì•½ (ì¹¼ìŠ˜ì±„ë„ì°¨ë‹¨ì œ)
  {
    drugName: 'ì•”ë¡œë””í•€',
    drugIngredient: 'Amlodipine',
    foods: ['ìëª½', 'ìëª½ì£¼ìŠ¤'],
    conflictIngredient: 'í‘¸ë¼ë…¸ì¿ ë§ˆë¦°',
    reason: 'ìëª½ì˜ í‘¸ë¼ë…¸ì¿ ë§ˆë¦° ì„±ë¶„ì´ ì•½ë¬¼ ëŒ€ì‚¬ íš¨ì†Œë¥¼ ì–µì œí•˜ì—¬ í˜ˆì¤‘ ì•½ë¬¼ ë†ë„ê°€ ê¸‰ì¦í•˜ê³ , í˜ˆì••ì´ ê³¼ë„í•˜ê²Œ ë–¨ì–´ì ¸ ì–´ì§€ëŸ¼ì¦, ì‹¤ì‹  ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤.',
    severity: 'ë†’ìŒ',
    alternatives: ['ì˜¤ë Œì§€', 'ê·¤', 'ë ˆëª¬', 'ì‚¬ê³¼ì£¼ìŠ¤'],
    source: 'FDA, ì‹ì•½ì²˜'
  },

  // ê°‘ìƒì„  í˜¸ë¥´ëª¬ì œ
  {
    drugName: 'ì‹ ì§€ë¡œì´ë“œ',
    drugIngredient: 'Levothyroxine',
    foods: ['ë‘ìœ ', 'ì½©', 'í˜¸ë‘', 'ì»¤í”¼'],
    conflictIngredient: 'ì´ì†Œí”Œë¼ë³¸, ì¹´í˜ì¸',
    reason: 'ì½©ì˜ ì´ì†Œí”Œë¼ë³¸ê³¼ ì»¤í”¼ì˜ ì¹´í˜ì¸ì´ ì•½ë¬¼ í¡ìˆ˜ë¥¼ ë°©í•´í•˜ì—¬ ê°‘ìƒì„  í˜¸ë¥´ëª¬ ìˆ˜ì¹˜ê°€ ë¶ˆì•ˆì •í•´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
    severity: 'ì¤‘ê°„',
    alternatives: ['ìš°ìœ ', 'ì•„ëª¬ë“œìœ ', 'ë¬¼'],
    source: 'ì‹ì•½ì²˜'
  },

  // í•­ìƒì œ
  {
    drugName: 'í…ŒíŠ¸ë¼ì‚¬ì´í´ë¦°',
    drugIngredient: 'Tetracycline',
    foods: ['ìš°ìœ ', 'ì¹˜ì¦ˆ', 'ìš”êµ¬ë¥´íŠ¸', 'ì¹¼ìŠ˜ë³´ì¶©ì œ'],
    conflictIngredient: 'ì¹¼ìŠ˜',
    reason: 'ì¹¼ìŠ˜ì´ í•­ìƒì œì™€ ê²°í•©í•˜ì—¬ í¡ìˆ˜ë¥¼ ë°©í•´í•˜ê³  ì•½íš¨ê°€ í¬ê²Œ ê°ì†Œí•©ë‹ˆë‹¤.',
    severity: 'ë†’ìŒ',
    alternatives: ['ë¬¼', 'ë¬´ê°€ë‹¹ ìŒë£Œ'],
    source: 'ì‹ì•½ì²˜'
  },

  // ë‹¹ë‡¨ì•½
  {
    drugName: 'ë©”íŠ¸í¬ë¥´ë¯¼',
    drugIngredient: 'Metformin',
    foods: ['ìˆ ', 'ì†Œì£¼', 'ë§¥ì£¼', 'ì™€ì¸'],
    conflictIngredient: 'ì•Œì½”ì˜¬',
    reason: 'ì•Œì½”ì˜¬ê³¼ í•¨ê»˜ ë³µìš© ì‹œ ì €í˜ˆë‹¹ ë° ì –ì‚°ì‚°ì¦ ìœ„í—˜ì´ ì¦ê°€í•©ë‹ˆë‹¤.',
    severity: 'ë†’ìŒ',
    alternatives: ['ë¬¼', 'ë¬´ê°€ë‹¹ ìŒë£Œ'],
    source: 'ì‹ì•½ì²˜, ëŒ€í•œë‹¹ë‡¨ë³‘í•™íšŒ'
  },

  // ì†Œì—¼ì§„í†µì œ
  {
    drugName: 'ì•„ìŠ¤í”¼ë¦°',
    drugIngredient: 'Aspirin',
    foods: ['ìˆ ', 'ì»¤í”¼'],
    conflictIngredient: 'ì•Œì½”ì˜¬, ì¹´í˜ì¸',
    reason: 'ì•Œì½”ì˜¬ê³¼ ì¹´í˜ì¸ì´ ìœ„ì¥ ìê·¹ì„ ì¦ê°€ì‹œì¼œ ìœ„ì—¼, ìœ„ê¶¤ì–‘ ìœ„í—˜ì´ ë†’ì•„ì§‘ë‹ˆë‹¤.',
    severity: 'ì¤‘ê°„',
    alternatives: ['ë¬¼', 'ìš°ìœ '],
    source: 'ì‹ì•½ì²˜'
  },

  // ... ì´ 50~100ê°œ ë°ì´í„°
];
```

**Step 2: ì‹ë‹¨ ì…ë ¥ UI + ì‹¤ì‹œê°„ ê²½ê³  ì‹œìŠ¤í…œ**
```javascript
// ì‹ë‹¨ ì…ë ¥ ì»´í¬ë„ŒíŠ¸
const MealInputForm = () => {
  const [mealType, setMealType] = useState('breakfast'); // breakfast, lunch, dinner, snack
  const [foodInput, setFoodInput] = useState('');
  const [warnings, setWarnings] = useState([]);
  const { userMedications } = useUser(); // í˜„ì¬ ì‚¬ìš©ìì˜ ë³µìš© ì•½ë¬¼

  // ì‹¤ì‹œê°„ ê²½ê³  ì²´í¬ (ì…ë ¥í•  ë•Œë§ˆë‹¤)
  const handleFoodInputChange = async (value) => {
    setFoodInput(value);

    if (value.length >= 2) {
      // ë””ë°”ìš´ìŠ¤ í›„ ì²´í¬
      const results = await checkFoodInteractionRealtime(value, userMedications);
      setWarnings(results);
    } else {
      setWarnings([]);
    }
  };

  // ì‹ë‹¨ ë“±ë¡
  const handleSubmit = async (e) => {
    e.preventDefault();

    // 1. ìµœì¢… ê²½ê³  ì²´í¬
    const finalWarnings = await checkFoodInteraction(foodInput, userMedications);

    if (finalWarnings.length > 0) {
      // ê²½ê³ ê°€ ìˆìœ¼ë©´ í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸
      const confirmed = await showWarningDialog(finalWarnings);
      if (!confirmed) return;
    }

    // 2. ì‹ë‹¨ ì €ì¥
    await saveMeal({
      userId: currentUser.id,
      mealType,
      foodName: foodInput,
      recordedAt: new Date(),
      warnings: finalWarnings // ê²½ê³  ì´ë ¥ë„ ì €ì¥
    });

    // 3. ê°€ì¡±ì—ê²Œ ì•Œë¦¼ (ì‹¬ê°í•œ ê²½ê³ ì¸ ê²½ìš°)
    if (finalWarnings.some(w => w.severity === 'ë†’ìŒ')) {
      await notifyFamily({
        userId: currentUser.id,
        type: 'DRUG_FOOD_WARNING',
        message: `${currentUser.name}ë‹˜ì´ ë³µìš© ì¤‘ì¸ ì•½ê³¼ ìƒí˜¸ì‘ìš© ê°€ëŠ¥í•œ ìŒì‹ì„ ì„­ì·¨í•˜ì…¨ìŠµë‹ˆë‹¤.`,
        details: finalWarnings
      });
    }

    setFoodInput('');
    setWarnings([]);
  };

  return (
    <form onSubmit={handleSubmit}>
      <select value={mealType} onChange={e => setMealType(e.target.value)}>
        <option value="breakfast">ì•„ì¹¨</option>
        <option value="lunch">ì ì‹¬</option>
        <option value="dinner">ì €ë…</option>
        <option value="snack">ê°„ì‹</option>
      </select>

      <input
        type="text"
        value={foodInput}
        onChange={e => handleFoodInputChange(e.target.value)}
        placeholder="ë¨¹ì€ ìŒì‹ ì…ë ¥ (ì˜ˆ: ì‹œê¸ˆì¹˜ ë‚˜ë¬¼)"
      />

      {/* ì‹¤ì‹œê°„ ê²½ê³  í‘œì‹œ */}
      {warnings.length > 0 && (
        <div className="warnings-container">
          {warnings.map((warning, idx) => (
            <Warning key={idx} data={warning} />
          ))}
        </div>
      )}

      <button type="submit">ë“±ë¡</button>
    </form>
  );
};
```

**Step 3: ê²½ê³  ì²´í¬ ë¡œì§ (í”„ë¡ íŠ¸ì—”ë“œ + ë°±ì—”ë“œ)**
```javascript
// Frontend: ë¹ ë¥¸ ë¡œì»¬ ì²´í¬ (ìì£¼ ì‚¬ìš©í•˜ëŠ” ìŒì‹ë§Œ)
const checkFoodInteractionRealtime = async (foodInput, userMedications) => {
  // 1. ë¡œì»¬ ìºì‹œì—ì„œ ë¨¼ì € ì²´í¬ (ë¹ ë¥¸ ì‘ë‹µ)
  const localWarnings = checkLocalInteractions(foodInput, userMedications);

  // 2. ë°±ì—”ë“œì—ì„œ ì „ì²´ ë°ì´í„°ë² ì´ìŠ¤ ê²€ìƒ‰
  const serverWarnings = await fetch('/api/interactions/check', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      foodName: foodInput,
      medications: userMedications.map(m => m.name)
    })
  }).then(res => res.json());

  return [...new Set([...localWarnings, ...serverWarnings])]; // ì¤‘ë³µ ì œê±°
};

// Backend (Spring Boot): ë°ì´í„°ë² ì´ìŠ¤ ê²€ìƒ‰
@RestController
@RequestMapping("/api/interactions")
public class DrugFoodInteractionController {

    @Autowired
    private DrugFoodInteractionRepository repository;

    @PostMapping("/check")
    public List<InteractionWarning> checkInteractions(
        @RequestBody InteractionCheckRequest request
    ) {
        List<InteractionWarning> warnings = new ArrayList<>();

        for (String medication : request.getMedications()) {
            // ì•½ëª…ìœ¼ë¡œ ìƒí˜¸ì‘ìš© ê²€ìƒ‰
            List<DrugFoodInteraction> interactions = repository
                .findByDrugNameContainingAndFoodNameContaining(
                    medication,
                    request.getFoodName()
                );

            for (DrugFoodInteraction interaction : interactions) {
                warnings.add(InteractionWarning.builder()
                    .medication(medication)
                    .food(interaction.getFoodName())
                    .ingredient(interaction.getConflictIngredient())
                    .reason(interaction.getReason())
                    .severity(interaction.getSeverity())
                    .alternatives(parseAlternatives(interaction.getAlternatives()))
                    .source(interaction.getSource())
                    .build());
            }
        }

        return warnings;
    }

    // ì£¼ì„±ë¶„ìœ¼ë¡œë„ ê²€ìƒ‰ (ë™ì¼ ì„±ë¶„ ë‹¤ë¥¸ ìƒí’ˆëª… ëŒ€ì‘)
    @GetMapping("/by-ingredient/{ingredient}")
    public List<DrugFoodInteraction> getByIngredient(
        @PathVariable String ingredient
    ) {
        return repository.findByDrugIngredientContaining(ingredient);
    }
}
```

**Step 4: ê²½ê³  UI ì»´í¬ë„ŒíŠ¸ (ì‚¬ìš©ì ì¹œí™”ì )**
```javascript
const Warning = ({ data }) => {
  const severityColors = {
    'ë†’ìŒ': '#ff4d4d',
    'ì¤‘ê°„': '#ffa500',
    'ë‚®ìŒ': '#ffeb3b'
  };

  return (
    <div
      className="warning-card"
      style={{ borderLeft: `4px solid ${severityColors[data.severity]}` }}
    >
      <div className="warning-header">
        <span className="severity-badge" style={{ background: severityColors[data.severity] }}>
          {data.severity === 'ë†’ìŒ' ? 'ğŸš¨' : data.severity === 'ì¤‘ê°„' ? 'âš ï¸' : 'ğŸ’¡'}
          {data.severity} ìœ„í—˜
        </span>
        <h4>{data.medication} â†”ï¸ {data.food}</h4>
      </div>

      <div className="warning-body">
        <p className="conflict-ingredient">
          ì¶©ëŒ ì„±ë¶„: <strong>{data.ingredient}</strong>
        </p>
        <p className="reason">{data.reason}</p>

        {data.alternatives && data.alternatives.length > 0 && (
          <div className="alternatives">
            <strong>ğŸ’¡ ëŒ€ì²´ ê°€ëŠ¥í•œ ìŒì‹:</strong>
            <ul>
              {data.alternatives.map((alt, idx) => (
                <li key={idx}>{alt}</li>
              ))}
            </ul>
          </div>
        )}

        <p className="source">ì¶œì²˜: {data.source}</p>
      </div>

      <div className="warning-actions">
        <button onClick={() => learnMore(data)}>ìì„¸íˆ ë³´ê¸°</button>
        <button onClick={() => contactDoctor(data)}>ì˜ì‚¬ì™€ ìƒë‹´</button>
      </div>
    </div>
  );
};
```

**Step 5: Kafka ì´ë²¤íŠ¸ë¡œ ê°€ì¡± ì•Œë¦¼**
```javascript
// ì‹¬ê°í•œ ê²½ê³  ë°œìƒ ì‹œ ìë™ìœ¼ë¡œ ê°€ì¡±ì—ê²Œ ì•Œë¦¼
@Service
public class DrugFoodWarningService {

    @Autowired
    private KafkaTemplate<String, WarningEvent> kafkaTemplate;

    public void notifyFamilyOnSevereWarning(
        User user,
        List<InteractionWarning> warnings
    ) {
        // ë†’ìŒ ì‹¬ê°ë„ ê²½ê³ ë§Œ í•„í„°ë§
        List<InteractionWarning> severeWarnings = warnings.stream()
            .filter(w -> "ë†’ìŒ".equals(w.getSeverity()))
            .collect(Collectors.toList());

        if (!severeWarnings.isEmpty()) {
            // Kafka ì´ë²¤íŠ¸ ë°œí–‰
            WarningEvent event = WarningEvent.builder()
                .userId(user.getId())
                .userName(user.getName())
                .type("DRUG_FOOD_WARNING")
                .warnings(severeWarnings)
                .timestamp(LocalDateTime.now())
                .build();

            kafkaTemplate.send("drug-food-warnings", event);

            // ê°€ì¡± êµ¬ì„±ì›ì—ê²Œ ì›¹ í‘¸ì‹œ ì•Œë¦¼
            notifyFamilyMembers(user.getFamilyGroupId(), event);
        }
    }
}
```

#### ë°ì´í„° ì¶œì²˜ ë° ìˆ˜ì§‘ ë°©ë²•
- **ì‹ì•½ì²˜ ê³µê³µ ë°ì´í„°**: ì˜ì•½í’ˆ ìƒí˜¸ì‘ìš© ì •ë³´
- **ë³‘ì› ì‹ì´ìš”ë²• ìë£Œ**: ì•½ë¬¼-ì‹í’ˆ ìƒí˜¸ì‘ìš© ë°ì´í„°ë² ì´ìŠ¤
  - âš ï¸ ì£¼ì˜: ë³‘ì› ì›¹ì‚¬ì´íŠ¸ëŠ” ì ‘ê·¼ ì œí•œì´ ìˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ê³µê°œëœ PDF ìë£Œë‚˜ í•™ìˆ  ë…¼ë¬¸ì„ ì°¸ê³ 
  - ëŒ€í•œì•½ì‚¬íšŒ, ì‹ì•½ì²˜ ì•ˆì „ì„± ì •ë³´ í™œìš© ê¶Œì¥
- **ì˜í•™ í•™ìˆ  ìë£Œ**: PubMed, ëŒ€í•œì•½í•™íšŒ ë…¼ë¬¸
- **ì´ˆê¸° êµ¬ì¶•**: 50~100ê°œ ì£¼ìš” ì•½ë¬¼ ìƒí˜¸ì‘ìš©ë§Œ êµ¬ì¶•í•´ë„ ì¶©ë¶„
  - ìš°ì„ ìˆœìœ„: í•­ì‘ê³ ì œ, í˜ˆì••ì•½, ë‹¹ë‡¨ì•½, í•­ìƒì œ, ê°‘ìƒì„ ì•½ ë“± ë§Œì„±ì§ˆí™˜ ì•½ë¬¼

#### ì°¨ë³„ì 
- âœ… **ê¸°ì¡´ ì•± ì—†ìŒ**: ì•½-ì•½ ìƒí˜¸ì‘ìš©ë§Œ ìˆê³  ì•½-ìŒì‹ì€ ê±°ì˜ ì—†ìŒ
- âœ… **êµ¬í˜„ ê°„ë‹¨**: AI ë¶ˆí•„ìš”, ë£° ë² ì´ìŠ¤ë¡œ 1ì£¼ ë‚´ êµ¬í˜„ ê°€ëŠ¥
- âœ… **ì‹¤ìš©ì **: ì‹¤ì œ ê±´ê°• ìœ„í—˜ ë°©ì§€

---

### 3. **ì•½ë´‰ì§€ OCR â†’ ì›í„°ì¹˜ ìë™ ë“±ë¡** â­â­â­â­

#### í˜„ì‹¤ì  ë¬¸ì œ
- ì•½ ì •ë³´ ìˆ˜ë™ ì…ë ¥ ë„ˆë¬´ ê·€ì°®ìŒ
- ë³µì¡í•œ ìš©ë²• (1ì¼ 3íšŒ, ì‹í›„ 30ë¶„) í—·ê°ˆë¦¼
- **ê¸°ì¡´ ì•±ì€ ìˆ˜ë™ ì…ë ¥ë§Œ ê°€ëŠ¥**

#### ì†”ë£¨ì…˜
```
[ì‹œë‚˜ë¦¬ì˜¤]
1. ì•½êµ­ì—ì„œ ë°›ì€ ì•½ë´‰ì§€ ì‚¬ì§„ ì´¬ì˜ ğŸ“¸

2. OCR ìë™ ì¸ì‹:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ì¸ì‹ëœ ì •ë³´:            â”‚
   â”‚ â€¢ ì•½ëª…: ì•„ìŠ¤í”¼ë¦° 100mg   â”‚
   â”‚ â€¢ ìš©ë²•: 1ì¼ 1íšŒ         â”‚
   â”‚ â€¢ ì‹œê°„: ì•„ì¹¨ ì‹í›„ 30ë¶„   â”‚
   â”‚ â€¢ ì²˜ë°©ì¼ìˆ˜: 30ì¼        â”‚
   â”‚ â€¢ ì´ ê°œìˆ˜: 30ì•Œ         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. ì‚¬ìš©ìëŠ” "í™•ì¸" ë²„íŠ¼ë§Œ í´ë¦­
   â†’ ìë™ìœ¼ë¡œ 30ì¼ê°„ ìŠ¤ì¼€ì¤„ ìƒì„±
   â†’ ì¬ê³  ê´€ë¦¬ ì‹œì‘

4. ë§¤ì¼ ì•„ì¹¨ 9ì‹œì— ìë™ ì•Œë¦¼
```

#### ê¸°ìˆ  êµ¬í˜„ (êµ¬ì²´ì  ë‹¨ê³„)

**Step 1: ì´ë¯¸ì§€ ì „ì²˜ë¦¬ (ì •í™•ë„ í–¥ìƒ)**
```javascript
// 1. ì´ë¯¸ì§€ í’ˆì§ˆ ê°œì„ 
const preprocessImage = async (imageFile) => {
  const canvas = document.createElement('canvas');
  const ctx = canvas.getContext('2d');
  const img = await loadImage(imageFile);

  // í¬ê¸° ì •ê·œí™” (OCR ì •í™•ë„ í–¥ìƒ)
  const scale = Math.min(1920 / img.width, 1080 / img.height);
  canvas.width = img.width * scale;
  canvas.height = img.height * scale;

  // ê·¸ë ˆì´ìŠ¤ì¼€ì¼ ë³€í™˜ (í…ìŠ¤íŠ¸ ì¸ì‹ë¥  í–¥ìƒ)
  ctx.filter = 'grayscale(100%) contrast(1.2)';
  ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

  return canvas.toDataURL('image/jpeg', 0.95);
};
```

**Step 2: OCR ìˆ˜í–‰ (Google Cloud Vision API)**
```javascript
// Google Cloud Vision API í˜¸ì¶œ
const performOCR = async (imageBase64) => {
  const response = await fetch(`https://vision.googleapis.com/v1/images:annotate?key=${API_KEY}`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      requests: [{
        image: { content: imageBase64.split(',')[1] },
        features: [{ type: 'TEXT_DETECTION' }]
      }]
    })
  });

  const result = await response.json();
  return result.responses[0].fullTextAnnotation.text;
};

// Fallback: Tesseract.js (ì˜¤í”„ë¼ì¸ ë˜ëŠ” ë¬´ë£Œ í•œë„ ì´ˆê³¼ ì‹œ)
const performOCRFallback = async (imageFile) => {
  const { data: { text } } = await Tesseract.recognize(imageFile, 'kor+eng', {
    logger: m => console.log(m) // ì§„í–‰ë¥  í‘œì‹œ
  });
  return text;
};
```

**Step 3: ì•½ ì •ë³´ ì¶”ì¶œ (ì •ê·œì‹ + íŒ¨í„´ ë§¤ì¹­)**
```javascript
const extractMedicationInfo = (ocrText) => {
  // 1. ì•½ëª… ì¶”ì¶œ (ë‹¤ì–‘í•œ íŒ¨í„´ ëŒ€ì‘)
  const extractMedName = (text) => {
    // íŒ¨í„´ 1: "[ì•½í’ˆëª…] ëª‡mg"
    const pattern1 = /ã€(.+?)ã€‘\s*(\d+(?:\.\d+)?)\s*(mg|mcg|g)/;
    // íŒ¨í„´ 2: "ì•½ëª…: OOO"
    const pattern2 = /ì•½ëª…[:ï¼š]\s*(.+?)(?:\s+\d+|\n)/;
    // íŒ¨í„´ 3: ì²« ì¤„ì— í° ê¸€ì”¨ë¡œ ëœ ì•½ëª…
    const pattern3 = /^(.+?)\s+\d+(?:mg|mcg)/m;

    const match = text.match(pattern1) || text.match(pattern2) || text.match(pattern3);
    return match ? match[1].trim() : null;
  };

  // 2. ìš©ë²• ì¶”ì¶œ
  const extractDosage = (text) => {
    const patterns = [
      /1ì¼\s*(\d+)íšŒ/,
      /í•˜ë£¨\s*(\d+)ë²ˆ/,
      /(\d+)íšŒ\/ì¼/
    ];
    for (const pattern of patterns) {
      const match = text.match(pattern);
      if (match) return { frequency: parseInt(match[1]), unit: 'íšŒ/ì¼' };
    }
    return null;
  };

  // 3. ë³µìš© ì‹œê°„ ì¶”ì¶œ
  const extractTiming = (text) => {
    const timingMap = {
      'ì•„ì¹¨ ì‹í›„': ['ì•„ì¹¨ ì‹í›„', 'ì¡°ì‹í›„', 'ì•„ì¹¨ì‹í›„'],
      'ì ì‹¬ ì‹í›„': ['ì ì‹¬ ì‹í›„', 'ì¤‘ì‹í›„', 'ì ì‹¬ì‹í›„'],
      'ì €ë… ì‹í›„': ['ì €ë… ì‹í›„', 'ì„ì‹í›„', 'ì €ë…ì‹í›„'],
      'ì‹í›„ 30ë¶„': ['ì‹í›„ 30ë¶„', 'ì‹í›„30ë¶„'],
      'ì‹ì „': ['ì‹ì „']
    };

    for (const [key, patterns] of Object.entries(timingMap)) {
      if (patterns.some(p => text.includes(p))) return key;
    }
    return 'ì‹í›„'; // ê¸°ë³¸ê°’
  };

  // 4. ì²˜ë°© ì¼ìˆ˜ ë° ì´ ê°œìˆ˜ ì¶”ì¶œ
  const extractDaysAndQuantity = (text) => {
    const daysMatch = text.match(/(\d+)ì¼[ë¶„åˆ†]/);
    const quantityMatch = text.match(/ì´\s*(\d+)\s*[ê°œì •ì•Œ]/);

    return {
      days: daysMatch ? parseInt(daysMatch[1]) : null,
      quantity: quantityMatch ? parseInt(quantityMatch[1]) : null
    };
  };

  // í†µí•© ì¶”ì¶œ
  return {
    name: extractMedName(ocrText),
    dosage: extractDosage(ocrText),
    timing: extractTiming(ocrText),
    ...extractDaysAndQuantity(ocrText)
  };
};
```

**Step 4: ì‹ì•½ì²˜ APIë¡œ ì•½ ìƒì„¸ ì •ë³´ ì¡°íšŒ**
```javascript
const getMedicationDetails = async (medName) => {
  try {
    const apiUrl = 'http://apis.data.go.kr/1471000/DrbEasyDrugInfoService/getDrbEasyDrugList';
    const response = await fetch(`${apiUrl}?serviceKey=${SERVICE_KEY}&itemName=${encodeURIComponent(medName)}`);
    const data = await response.json();

    if (data.body.totalCount > 0) {
      const item = data.body.items[0];
      return {
        ingredient: item.mainIngredient,        // ì£¼ì„±ë¶„
        efficacy: item.efcyQesitm,             // íš¨ëŠ¥
        usage: item.useMethodQesitm,           // ì‚¬ìš©ë²•
        precautions: item.atpnQesitm,          // ì£¼ì˜ì‚¬í•­
        sideEffects: item.seQesitm,            // ë¶€ì‘ìš©
        manufacturer: item.entpName             // ì œì¡°ì‚¬
      };
    }
  } catch (error) {
    console.error('ì‹ì•½ì²˜ API ì¡°íšŒ ì‹¤íŒ¨:', error);
    return null;
  }
};
```

**Step 5: ì‚¬ìš©ì í™•ì¸ ë° ìë™ ìŠ¤ì¼€ì¤„ ìƒì„±**
```javascript
const autoRegisterMedication = async (imageFile) => {
  // 1. ì „ì²˜ë¦¬
  const processedImage = await preprocessImage(imageFile);

  // 2. OCR (Google Vision â†’ Tesseract fallback)
  let ocrText;
  try {
    ocrText = await performOCR(processedImage);
  } catch (error) {
    console.warn('Google Vision ì‹¤íŒ¨, Tesseract.jsë¡œ fallback');
    ocrText = await performOCRFallback(imageFile);
  }

  // 3. ì •ë³´ ì¶”ì¶œ
  const extracted = extractMedicationInfo(ocrText);

  // 4. ì‹ì•½ì²˜ APIë¡œ ìƒì„¸ ì •ë³´
  const details = await getMedicationDetails(extracted.name);

  // 5. ì‚¬ìš©ì í™•ì¸ UI í‘œì‹œ
  const confirmed = await showConfirmationDialog({
    ...extracted,
    ...details,
    rawText: ocrText // ë””ë²„ê¹…ìš©
  });

  if (confirmed) {
    // 6. ìë™ ìŠ¤ì¼€ì¤„ ìƒì„± (Kafka ì´ë²¤íŠ¸ ë°œí–‰)
    await createMedicationSchedule({
      userId: currentUser.id,
      medication: confirmed,
      schedules: generateSchedules(confirmed.dosage, confirmed.timing, confirmed.days)
    });

    // 7. ì¬ê³  ê´€ë¦¬ ì‹œì‘
    await initializeInventory({
      medicationId: confirmed.id,
      totalQuantity: confirmed.quantity,
      remainingQuantity: confirmed.quantity,
      expiryDate: confirmed.expiryDate
    });
  }
};

// ìŠ¤ì¼€ì¤„ ìë™ ìƒì„± í—¬í¼
const generateSchedules = (dosage, timing, days) => {
  const schedules = [];
  const timingMap = {
    'ì•„ì¹¨ ì‹í›„': '09:00',
    'ì ì‹¬ ì‹í›„': '13:00',
    'ì €ë… ì‹í›„': '19:00'
  };

  for (let day = 0; day < days; day++) {
    const date = new Date();
    date.setDate(date.getDate() + day);

    // dosage.frequencyë§Œí¼ ë°˜ë³µ
    for (let i = 0; i < dosage.frequency; i++) {
      schedules.push({
        date: date.toISOString().split('T')[0],
        time: timingMap[timing] || '09:00',
        completed: false
      });
    }
  }

  return schedules;
};
```

#### ì‚¬ìš© API ë° ë¹„ìš©
- **Google Cloud Vision API**
  - ë¬´ë£Œ í•œë„: 1,000ê±´/ì›”
  - ì´í›„: $1.50/1,000ê±´
  - í•œê¸€ ì¸ì‹ë¥ : 95%+
  - [ì‹ ì²­ ë°©ë²•](https://cloud.google.com/vision/docs/setup)

- **Tesseract.js** (Fallbackìš©)
  - ì™„ì „ ë¬´ë£Œ
  - ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰
  - í•œê¸€ ì¸ì‹ë¥ : 80%
  - ëŠë¦° ì†ë„ (3-5ì´ˆ)

- **ì‹ì•½ì²˜ ì˜ì•½í’ˆì•ˆì „ë‚˜ë¼ API** (ì•½ ì •ë³´ ì¡°íšŒ)
  - ì™„ì „ ë¬´ë£Œ
  - ê³µê³µë°ì´í„°í¬í„¸ì—ì„œ ì‹ ì²­ (ìŠ¹ì¸ 20-30ë¶„)
  - [ì‹ ì²­ ë§í¬](https://www.data.go.kr/data/15075163/openapi.do)

#### ì°¨ë³„ì 
- âœ… **í¸ì˜ì„± ê·¹ëŒ€í™”**: ì‚¬ì§„ í•œ ì¥ìœ¼ë¡œ ëª¨ë“  ì •ë³´ ìë™ ì…ë ¥
- âœ… **ì‹¤ë²„ ì¹œí™”**: ë³µì¡í•œ ì…ë ¥ ê³¼ì • ì œê±°

---

### 4. **ì•Œì•½ ì—­ê²€ìƒ‰ - "ì´ê²Œ ë¬´ìŠ¨ ì•½ì´ì§€?"** â­â­â­â­

#### í˜„ì‹¤ì  ë¬¸ì œ
- ì•½í†µì—ì„œ ì•½ì´ ìŸì•„ì¡Œì„ ë•Œ êµ¬ë¶„ ëª»í•¨
- ì—¬ëŸ¬ ì•½ì´ ì„ì—¬ìˆì„ ë•Œ ë­ê°€ ë­”ì§€ ëª¨ë¦„

#### ì†”ë£¨ì…˜
```
[ì‹œë‚˜ë¦¬ì˜¤]
1. ì•Œì•½ ì‚¬ì§„ ì´¬ì˜ ë˜ëŠ” íŠ¹ì§• ì…ë ¥
   - ìƒ‰ìƒ: í°ìƒ‰
   - ëª¨ì–‘: ì›í˜•
   - ê°ì¸: "A100"

2. ì‹ì•½ì²˜ "ì˜ì•½í’ˆ ì‹ë³„ì •ë³´" API í˜¸ì¶œ

3. ê²°ê³¼ í‘œì‹œ:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ğŸ” ê²€ìƒ‰ ê²°ê³¼            â”‚
   â”‚                         â”‚
   â”‚ ì•½ëª…: ì•„ìŠ¤í”¼ë¦° 100mg     â”‚
   â”‚ ì œì¡°ì‚¬: â—‹â—‹ì œì•½         â”‚
   â”‚ íš¨ëŠ¥: í•´ì—´, ì§„í†µ, ì†Œì—¼   â”‚
   â”‚                         â”‚
   â”‚ âš ï¸ ì£¼ì˜ì‚¬í•­:            â”‚
   â”‚ ê³µë³µ ë³µìš© ì‹œ ìœ„ì¥ ìê·¹   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ê¸°ìˆ  êµ¬í˜„ (êµ¬ì²´ì  ë‹¨ê³„)

**Step 1: UI - ì•Œì•½ íŠ¹ì§• ì…ë ¥ í¼**
```javascript
// ì•Œì•½ íŠ¹ì§• ì…ë ¥ ì»´í¬ë„ŒíŠ¸
const PillSearchForm = () => {
  const [searchParams, setSearchParams] = useState({
    color: '',      // ìƒ‰ìƒ
    shape: '',      // ëª¨ì–‘
    imprint: '',    // ì•ë©´ ê°ì¸
    imprintBack: '' // ë’·ë©´ ê°ì¸
  });

  // ìƒ‰ìƒ ì˜µì…˜ (ì‹ì•½ì²˜ í‘œì¤€)
  const colorOptions = [
    'í•˜ì–‘', 'ë…¸ë‘', 'ì£¼í™©', 'ë¶„í™', 'ë¹¨ê°•', 'ê°ˆìƒ‰',
    'ì—°ë‘', 'ì´ˆë¡', 'ì²­ë¡', 'íŒŒë‘', 'ë‚¨ìƒ‰', 'ìì£¼', 'ë³´ë¼',
    'íšŒìƒ‰', 'ê²€ì •', 'íˆ¬ëª…'
  ];

  // ëª¨ì–‘ ì˜µì…˜ (ì‹ì•½ì²˜ í‘œì¤€)
  const shapeOptions = [
    'ì›í˜•', 'íƒ€ì›í˜•', 'ì¥ë°©í˜•', 'ë°˜ì›í˜•', 'ì‚¼ê°í˜•',
    'ì‚¬ê°í˜•', 'ë§ˆë¦„ëª¨í˜•', 'ì˜¤ê°í˜•', 'ìœ¡ê°í˜•', 'íŒ”ê°í˜•',
    'ê¸°íƒ€'
  ];

  return (
    <form onSubmit={handleSearch}>
      <select
        value={searchParams.color}
        onChange={e => setSearchParams({...searchParams, color: e.target.value})}
      >
        <option value="">ìƒ‰ìƒ ì„ íƒ</option>
        {colorOptions.map(color => <option key={color} value={color}>{color}</option>)}
      </select>

      <select
        value={searchParams.shape}
        onChange={e => setSearchParams({...searchParams, shape: e.target.value})}
      >
        <option value="">ëª¨ì–‘ ì„ íƒ</option>
        {shapeOptions.map(shape => <option key={shape} value={shape}>{shape}</option>)}
      </select>

      <input
        type="text"
        placeholder="ì•ë©´ ê°ì¸ (ì˜ˆ: A100)"
        value={searchParams.imprint}
        onChange={e => setSearchParams({...searchParams, imprint: e.target.value})}
      />

      <input
        type="text"
        placeholder="ë’·ë©´ ê°ì¸ (ì„ íƒ)"
        value={searchParams.imprintBack}
        onChange={e => setSearchParams({...searchParams, imprintBack: e.target.value})}
      />

      <button type="submit">ê²€ìƒ‰</button>
    </form>
  );
};
```

**Step 2: ì‹ì•½ì²˜ API í˜¸ì¶œ (ì˜ì•½í’ˆ ë‚±ì•Œì‹ë³„ ì •ë³´)**
```javascript
// ì‹ì•½ì²˜ ì˜ì•½í’ˆ ë‚±ì•Œì‹ë³„ ì •ë³´ API
const searchPillByAppearance = async (color, shape, imprint, imprintBack) => {
  const apiUrl = 'http://apis.data.go.kr/1471000/DrbEasyDrugInfoService/getDrbEasyDrugList';

  // íŒŒë¼ë¯¸í„° ë§¤í•‘ (í•œê¸€ â†’ API ì½”ë“œ)
  const colorMap = {
    'í•˜ì–‘': 'í•˜ì–‘', 'ë…¸ë‘': 'ë…¸ë‘', 'ì£¼í™©': 'ì£¼í™©', 'ë¶„í™': 'ë¶„í™',
    'ë¹¨ê°•': 'ë¹¨ê°•', 'ê°ˆìƒ‰': 'ê°ˆìƒ‰', 'ì—°ë‘': 'ì—°ë‘', 'ì´ˆë¡': 'ì´ˆë¡'
    // ... ì „ì²´ ë§¤í•‘
  };

  const shapeMap = {
    'ì›í˜•': 'ì›í˜•', 'íƒ€ì›í˜•': 'íƒ€ì›í˜•', 'ì¥ë°©í˜•': 'ì¥ë°©í˜•'
    // ... ì „ì²´ ë§¤í•‘
  };

  const params = new URLSearchParams({
    serviceKey: DRUG_API_KEY,
    type: 'json',
    numOfRows: 100
  });

  // ì„ íƒì  íŒŒë¼ë¯¸í„° ì¶”ê°€
  if (color) params.append('drugShape', shapeMap[shape] || shape);
  if (shape) params.append('drugColor', colorMap[color] || color);
  if (imprint) params.append('printFront', imprint);
  if (imprintBack) params.append('printBack', imprintBack);

  try {
    const response = await fetch(`${apiUrl}?${params.toString()}`);
    const data = await response.json();

    if (data.body && data.body.totalCount > 0) {
      return data.body.items.map(item => ({
        itemSeq: item.itemSeq,              // í’ˆëª©ê¸°ì¤€ì½”ë“œ
        itemName: item.itemName,            // ì•½í’ˆëª…
        entpName: item.entpName,            // ì œì¡°ì‚¬
        itemImage: item.itemImage,          // ì•½í’ˆ ì´ë¯¸ì§€
        chart: item.chart,                  // ë¶„ë¥˜
        itemPermitDate: item.itemPermitDate,// í—ˆê°€ì¼ì
        className: item.className,          // íš¨ëŠ¥ë¶„ë¥˜
        etcOtcName: item.etcOtcName,       // ì „ë¬¸/ì¼ë°˜
        // ì‹ë³„ ì •ë³´
        drugShape: item.drugShape,          // ëª¨ì–‘
        colorClass1: item.colorClass1,      // ìƒ‰ìƒ(ì•)
        colorClass2: item.colorClass2,      // ìƒ‰ìƒ(ë’¤)
        printFront: item.printFront,        // ì•ë©´ ê°ì¸
        printBack: item.printBack,          // ë’·ë©´ ê°ì¸
        lengLong: item.lengLong,            // í¬ê¸°(ì¥ì¶•)
        lengShort: item.lengShort,          // í¬ê¸°(ë‹¨ì¶•)
        thick: item.thick                   // ë‘ê»˜
      }));
    }

    return [];
  } catch (error) {
    console.error('ì‹ì•½ì²˜ API ì¡°íšŒ ì‹¤íŒ¨:', error);
    throw error;
  }
};
```

**Step 3: ê²€ìƒ‰ ê²°ê³¼ í‘œì‹œ + ì¶”ê°€ ì •ë³´ ì¡°íšŒ**
```javascript
const PillSearchResult = ({ results }) => {
  const [selectedPill, setSelectedPill] = useState(null);
  const [detailedInfo, setDetailedInfo] = useState(null);

  // ì„ íƒí•œ ì•½ì˜ ìƒì„¸ ì •ë³´ ì¡°íšŒ
  const fetchDetailedInfo = async (itemSeq) => {
    const apiUrl = 'http://apis.data.go.kr/1471000/DrbEasyDrugInfoService/getDrbEasyDrugList';
    const response = await fetch(`${apiUrl}?serviceKey=${DRUG_API_KEY}&itemSeq=${itemSeq}`);
    const data = await response.json();

    if (data.body.items.length > 0) {
      const item = data.body.items[0];
      setDetailedInfo({
        efficacy: item.efcyQesitm,          // íš¨ëŠ¥íš¨ê³¼
        usage: item.useMethodQesitm,        // ì‚¬ìš©ë²•
        precautions: item.atpnWarnQesitm,   // ê²½ê³ 
        atpnQesitm: item.atpnQesitm,       // ì£¼ì˜ì‚¬í•­
        intrcQesitm: item.intrcQesitm,     // ìƒí˜¸ì‘ìš©
        seQesitm: item.seQesitm,           // ë¶€ì‘ìš©
        depositMethodQesitm: item.depositMethodQesitm // ë³´ê´€ë²•
      });
    }
  };

  return (
    <div className="pill-search-results">
      <h3>ê²€ìƒ‰ ê²°ê³¼: {results.length}ê±´</h3>

      {results.map(pill => (
        <div
          key={pill.itemSeq}
          className="pill-card"
          onClick={() => {
            setSelectedPill(pill);
            fetchDetailedInfo(pill.itemSeq);
          }}
        >
          {pill.itemImage && <img src={pill.itemImage} alt={pill.itemName} />}

          <div className="pill-info">
            <h4>{pill.itemName}</h4>
            <p>ì œì¡°ì‚¬: {pill.entpName}</p>
            <p>ë¶„ë¥˜: {pill.className}</p>
            <p>ì „ë¬¸/ì¼ë°˜: {pill.etcOtcName}</p>

            <div className="pill-identification">
              <span>ëª¨ì–‘: {pill.drugShape}</span>
              <span>ìƒ‰ìƒ: {pill.colorClass1}</span>
              <span>ì•ë©´ ê°ì¸: {pill.printFront}</span>
              {pill.printBack && <span>ë’·ë©´ ê°ì¸: {pill.printBack}</span>}
            </div>
          </div>
        </div>
      ))}

      {/* ìƒì„¸ ì •ë³´ ëª¨ë‹¬ */}
      {selectedPill && detailedInfo && (
        <div className="pill-detail-modal">
          <h2>{selectedPill.itemName}</h2>

          <section>
            <h3>ğŸ¯ íš¨ëŠ¥Â·íš¨ê³¼</h3>
            <p>{detailedInfo.efficacy}</p>
          </section>

          <section>
            <h3>ğŸ’Š ì‚¬ìš©ë²•</h3>
            <p>{detailedInfo.usage}</p>
          </section>

          <section>
            <h3>âš ï¸ ì£¼ì˜ì‚¬í•­</h3>
            <p>{detailedInfo.atpnQesitm}</p>
          </section>

          <section>
            <h3>ğŸ”„ ì•½ë¬¼ ìƒí˜¸ì‘ìš©</h3>
            <p>{detailedInfo.intrcQesitm}</p>
          </section>

          <section>
            <h3>ğŸ©º ë¶€ì‘ìš©</h3>
            <p>{detailedInfo.seQesitm}</p>
          </section>

          <section>
            <h3>ğŸ“¦ ë³´ê´€ë²•</h3>
            <p>{detailedInfo.depositMethodQesitm}</p>
          </section>

          <button onClick={() => handleAddToMyMedications(selectedPill)}>
            ë‚´ ì•½ ëª©ë¡ì— ì¶”ê°€
          </button>
        </div>
      )}
    </div>
  );
};

// ë‚´ ì•½ ëª©ë¡ì— ì¶”ê°€
const handleAddToMyMedications = async (pill) => {
  await createMedication({
    userId: currentUser.id,
    name: pill.itemName,
    manufacturer: pill.entpName,
    itemSeq: pill.itemSeq, // ì‹ì•½ì²˜ ì½”ë“œ ì €ì¥
    imageUrl: pill.itemImage
  });

  alert(`${pill.itemName}ì´(ê°€) ë‚´ ì•½ ëª©ë¡ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`);
};
```

**Step 4: (ì„ íƒì ) ì´ë¯¸ì§€ ê¸°ë°˜ ê²€ìƒ‰ - AI ìƒ‰ìƒ/ëª¨ì–‘ ì¶”ì¶œ**
```javascript
// í–¥í›„ í™•ì¥: ì•Œì•½ ì‚¬ì§„ ì°ìœ¼ë©´ ìë™ìœ¼ë¡œ ìƒ‰ìƒ/ëª¨ì–‘ ê°ì§€
const extractPillFeatures = async (imageFile) => {
  // Google Cloud Vision APIë¡œ ìƒ‰ìƒ ì¶”ì¶œ
  const visionResult = await analyzeImage(imageFile);
  const dominantColor = visionResult.imagePropertiesAnnotation.dominantColors.colors[0];

  // ìƒ‰ìƒ ë§¤í•‘ (RGB â†’ í•œê¸€ ìƒ‰ìƒëª…)
  const colorName = rgbToKoreanColor(dominantColor.color);

  // ê°„ë‹¨í•œ í˜•íƒœ ë¶„ì„ (ì›í˜• vs íƒ€ì›í˜• ë“±)
  // Canvas APIë¡œ ìœ¤ê³½ì„  ë¶„ì„
  const shape = await detectShape(imageFile);

  return {
    color: colorName,
    shape: shape
  };
};
```

#### ë°ì´í„° ì¶œì²˜
- **ì‹ì•½ì²˜ ê³µê³µë°ì´í„°**: https://www.data.go.kr/data/15075163/fileData.do
- ì•½ 10ë§Œê±´ ë°ì´í„° (ë¬´ë£Œ)

#### ì°¨ë³„ì 
- âœ… **ì‹¤ìƒí™œ í˜ì¸í¬ì¸íŠ¸ í•´ê²°**
- âœ… **êµ¬í˜„ ê°„ë‹¨**: API í˜¸ì¶œë§Œ

---

### 5. **ë³µì•½ ìˆœì‘ë„ ë¦¬í¬íŠ¸** (ì˜ë£Œì§„ ê³µìœ ìš©) â­â­â­

#### í˜„ì‹¤ì  ë¬¸ì œ
- ë³‘ì› ê°€ë©´ ì˜ì‚¬: "ì•½ ì˜ ë“œì…¨ì–´ìš”?"
- í™˜ì: ê¸°ì–µ ì•ˆ ë‚¨ â†’ "ë„¤ ì˜ ë¨¹ì—ˆì–´ìš”" (ê±°ì§“)
- ì‹¤ì œë¡œëŠ” ì ˆë°˜ë§Œ ë³µìš© â†’ ì¹˜ë£Œ íš¨ê³¼ ì—†ìŒ
- ì˜ì‚¬ëŠ” "ì•½ì´ ì•ˆ ë§ë‚˜?" vs "ì•½ì„ ì•ˆ ë¨¹ë‚˜?" íŒë‹¨ ëª»í•¨

#### ì†”ë£¨ì…˜: ì˜ë£Œì§„ ì œì¶œìš© ë¦¬í¬íŠ¸
```
[ê¸°ëŠ¥]
1. ì§€ë‚œ 30ì¼ê°„ ë³µì•½ ì´ë ¥ ìë™ ì§‘ê³„

2. PDF ë¦¬í¬íŠ¸ ìƒì„±:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ë³µì•½ ìˆœì‘ë„ ë¦¬í¬íŠ¸           â”‚
   â”‚ ê¸°ê°„: 2025-10-01 ~ 10-31    â”‚
   â”‚                             â”‚
   â”‚ ğŸ“Š ì „ì²´ ìˆœì‘ë„: 87%         â”‚
   â”‚                             â”‚
   â”‚ ì•½ë¬¼ë³„ ìƒì„¸:                â”‚
   â”‚ â€¢ í˜ˆì••ì•½ (ì•„ëª¨ë””í•€)          â”‚
   â”‚   - ìˆœì‘ë„: 95% (2ì¼ ëˆ„ë½)  â”‚
   â”‚   - ëˆ„ë½ì¼: 10/15, 10/23    â”‚
   â”‚                             â”‚
   â”‚ â€¢ ë‹¹ë‡¨ì•½ (ë©”íŠ¸í¬ë¥´ë¯¼)        â”‚
   â”‚   - ìˆœì‘ë„: 80% (6ì¼ ëˆ„ë½)  â”‚
   â”‚   - ëˆ„ë½ì¼: 10/3, 10/7...   â”‚
   â”‚                             â”‚
   â”‚ ğŸ“ˆ ì£¼ê°„ë³„ íŠ¸ë Œë“œ ê·¸ë˜í”„      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. "PDF ë‹¤ìš´ë¡œë“œ" â†’ ì§„ë£Œ ì‹œ ì˜ì‚¬ì—ê²Œ ì œì¶œ
```

#### ê¸°ìˆ  êµ¬í˜„ (êµ¬ì²´ì  ë‹¨ê³„)

**Step 1: ë³µì•½ ë°ì´í„° ì§‘ê³„ (Backend)**
```java
@Service
public class AdherenceReportService {

    @Autowired
    private MedicationLogRepository logRepository;

    public AdherenceReport generateReport(Long userId, LocalDate startDate, LocalDate endDate) {
        // 1. í•´ë‹¹ ê¸°ê°„ì˜ ëª¨ë“  ë³µì•½ ë¡œê·¸ ì¡°íšŒ
        List<MedicationLog> logs = logRepository
            .findByUserIdAndScheduledTimeBetween(userId, startDate.atStartOfDay(), endDate.atTime(23, 59));

        // 2. ì•½ë¬¼ë³„ ê·¸ë£¹í™”
        Map<Medication, List<MedicationLog>> logsByMed = logs.stream()
            .collect(Collectors.groupingBy(MedicationLog::getMedication));

        // 3. ì•½ë¬¼ë³„ ìˆœì‘ë„ ê³„ì‚°
        List<MedicationAdherence> adherenceList = new ArrayList<>();

        for (Map.Entry<Medication, List<MedicationLog>> entry : logsByMed.entrySet()) {
            Medication med = entry.getKey();
            List<MedicationLog> medLogs = entry.getValue();

            // ì „ì²´ ë³µìš© ì˜ˆì • íšŸìˆ˜
            long totalExpected = medLogs.size();

            // ì‹¤ì œ ë³µìš© íšŸìˆ˜
            long completedCount = medLogs.stream()
                .filter(MedicationLog::isCompleted)
                .count();

            // ìˆœì‘ë„ ê³„ì‚°
            double adherenceRate = totalExpected > 0
                ? (completedCount * 100.0 / totalExpected)
                : 0;

            // ëˆ„ë½ì¼ ëª©ë¡
            List<LocalDate> missedDates = medLogs.stream()
                .filter(log -> !log.isCompleted())
                .map(log -> log.getScheduledTime().toLocalDate())
                .distinct()
                .sorted()
                .collect(Collectors.toList());

            adherenceList.add(MedicationAdherence.builder()
                .medication(med)
                .totalExpected(totalExpected)
                .completedCount(completedCount)
                .missedCount(totalExpected - completedCount)
                .adherenceRate(adherenceRate)
                .missedDates(missedDates)
                .build());
        }

        // 4. ì „ì²´ ìˆœì‘ë„ ê³„ì‚°
        double overallAdherence = calculateOverallAdherence(adherenceList);

        // 5. ì£¼ê°„ë³„ íŠ¸ë Œë“œ ê³„ì‚°
        List<WeeklyTrend> weeklyTrends = calculateWeeklyTrends(logs, startDate, endDate);

        return AdherenceReport.builder()
            .userId(userId)
            .startDate(startDate)
            .endDate(endDate)
            .overallAdherence(overallAdherence)
            .medicationAdherences(adherenceList)
            .weeklyTrends(weeklyTrends)
            .generatedAt(LocalDateTime.now())
            .build();
    }

    // ì „ì²´ ìˆœì‘ë„ ê³„ì‚°
    private double calculateOverallAdherence(List<MedicationAdherence> adherences) {
        if (adherences.isEmpty()) return 0;

        double totalCompleted = adherences.stream()
            .mapToDouble(MedicationAdherence::getCompletedCount)
            .sum();

        double totalExpected = adherences.stream()
            .mapToDouble(MedicationAdherence::getTotalExpected)
            .sum();

        return totalExpected > 0 ? (totalCompleted * 100.0 / totalExpected) : 0;
    }

    // ì£¼ê°„ë³„ íŠ¸ë Œë“œ ê³„ì‚° (ì£¼ì°¨ë³„ ìˆœì‘ë„)
    private List<WeeklyTrend> calculateWeeklyTrends(
        List<MedicationLog> logs,
        LocalDate startDate,
        LocalDate endDate
    ) {
        List<WeeklyTrend> trends = new ArrayList<>();

        LocalDate weekStart = startDate;
        while (weekStart.isBefore(endDate)) {
            LocalDate weekEnd = weekStart.plusDays(6);
            if (weekEnd.isAfter(endDate)) weekEnd = endDate;

            LocalDate finalWeekEnd = weekEnd;
            List<MedicationLog> weekLogs = logs.stream()
                .filter(log -> {
                    LocalDate logDate = log.getScheduledTime().toLocalDate();
                    return !logDate.isBefore(weekStart) && !logDate.isAfter(finalWeekEnd);
                })
                .collect(Collectors.toList());

            long weekTotal = weekLogs.size();
            long weekCompleted = weekLogs.stream().filter(MedicationLog::isCompleted).count();
            double weekAdherence = weekTotal > 0 ? (weekCompleted * 100.0 / weekTotal) : 0;

            trends.add(WeeklyTrend.builder()
                .weekStart(weekStart)
                .weekEnd(weekEnd)
                .adherenceRate(weekAdherence)
                .totalExpected(weekTotal)
                .completedCount(weekCompleted)
                .build());

            weekStart = weekStart.plusDays(7);
        }

        return trends;
    }
}
```

**Step 2: PDF ìƒì„± (iText ë˜ëŠ” Apache PDFBox)**
```java
@Service
public class PDFReportGenerator {

    public byte[] generateAdherencePDF(AdherenceReport report, User user) throws IOException {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        PdfWriter writer = new PdfWriter(baos);
        PdfDocument pdf = new PdfDocument(writer);
        Document document = new Document(pdf);

        // í•œê¸€ í°íŠ¸ ì„¤ì • (NanumGothic ë“±)
        PdfFont font = PdfFontFactory.createFont("NanumGothic.ttf", PdfEncodings.IDENTITY_H);
        document.setFont(font);

        // 1. í—¤ë”
        Paragraph title = new Paragraph("ë³µì•½ ìˆœì‘ë„ ë¦¬í¬íŠ¸")
            .setFontSize(20)
            .setBold()
            .setTextAlignment(TextAlignment.CENTER);
        document.add(title);

        // 2. í™˜ì ì •ë³´
        document.add(new Paragraph(String.format("í™˜ìëª…: %s", user.getName())));
        document.add(new Paragraph(String.format("ìƒë…„ì›”ì¼: %s", user.getBirthDate())));
        document.add(new Paragraph(String.format("ë³´ê³  ê¸°ê°„: %s ~ %s",
            report.getStartDate(), report.getEndDate())));
        document.add(new Paragraph(String.format("ë¦¬í¬íŠ¸ ìƒì„±ì¼: %s",
            report.getGeneratedAt().format(DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm")))));
        document.add(new Paragraph("\n"));

        // 3. ì „ì²´ ìˆœì‘ë„
        Paragraph overall = new Paragraph(String.format("ğŸ“Š ì „ì²´ ìˆœì‘ë„: %.1f%%", report.getOverallAdherence()))
            .setFontSize(16)
            .setBold();
        document.add(overall);
        document.add(new Paragraph("\n"));

        // 4. ì•½ë¬¼ë³„ ìƒì„¸ í…Œì´ë¸”
        document.add(new Paragraph("ì•½ë¬¼ë³„ ë³µì•½ í˜„í™©").setFontSize(14).setBold());

        Table table = new Table(new float[]{3, 2, 2, 2, 4});
        table.setWidth(UnitValue.createPercentValue(100));

        // í…Œì´ë¸” í—¤ë”
        table.addHeaderCell("ì•½ë¬¼ëª…");
        table.addHeaderCell("ìˆœì‘ë„");
        table.addHeaderCell("ë³µìš© ì™„ë£Œ");
        table.addHeaderCell("ëˆ„ë½ íšŸìˆ˜");
        table.addHeaderCell("ëˆ„ë½ì¼");

        // í…Œì´ë¸” ë°ì´í„°
        for (MedicationAdherence adherence : report.getMedicationAdherences()) {
            table.addCell(adherence.getMedication().getName());
            table.addCell(String.format("%.1f%%", adherence.getAdherenceRate()));
            table.addCell(String.format("%d/%d",
                adherence.getCompletedCount(), adherence.getTotalExpected()));
            table.addCell(String.valueOf(adherence.getMissedCount()));

            String missedDatesStr = adherence.getMissedDates().stream()
                .map(date -> date.format(DateTimeFormatter.ofPattern("MM/dd")))
                .limit(5) // ìµœëŒ€ 5ê°œë§Œ í‘œì‹œ
                .collect(Collectors.joining(", "));
            if (adherence.getMissedDates().size() > 5) {
                missedDatesStr += " ...";
            }
            table.addCell(missedDatesStr);
        }

        document.add(table);
        document.add(new Paragraph("\n"));

        // 5. ì£¼ê°„ë³„ íŠ¸ë Œë“œ ê·¸ë˜í”„ (í…ìŠ¤íŠ¸ ê¸°ë°˜ ë˜ëŠ” ì´ë¯¸ì§€)
        document.add(new Paragraph("ğŸ“ˆ ì£¼ê°„ë³„ ìˆœì‘ë„ íŠ¸ë Œë“œ").setFontSize(14).setBold());

        for (WeeklyTrend trend : report.getWeeklyTrends()) {
            document.add(new Paragraph(String.format("%s ~ %s: %.1f%% (%d/%d)",
                trend.getWeekStart().format(DateTimeFormatter.ofPattern("MM/dd")),
                trend.getWeekEnd().format(DateTimeFormatter.ofPattern("MM/dd")),
                trend.getAdherenceRate(),
                trend.getCompletedCount(),
                trend.getTotalExpected()
            )));
        }

        // 6. ê¶Œì¥ ì‚¬í•­
        document.add(new Paragraph("\n"));
        document.add(new Paragraph("ğŸ’¡ ê¶Œì¥ ì‚¬í•­").setFontSize(14).setBold());

        if (report.getOverallAdherence() >= 90) {
            document.add(new Paragraph("ë§¤ìš° ì˜ ë³µìš©í•˜ê³  ê³„ì‹­ë‹ˆë‹¤. ì´ ìƒíƒœë¥¼ ìœ ì§€í•˜ì„¸ìš”."));
        } else if (report.getOverallAdherence() >= 70) {
            document.add(new Paragraph("ì–‘í˜¸í•˜ì§€ë§Œ ê°œì„  ì—¬ì§€ê°€ ìˆìŠµë‹ˆë‹¤. ëˆ„ë½ì¼ì„ ì¤„ì´ë„ë¡ ë…¸ë ¥í•´ë³´ì„¸ìš”."));
        } else {
            document.add(new Paragraph("ìˆœì‘ë„ê°€ ë‚®ìŠµë‹ˆë‹¤. ì˜ë£Œì§„ê³¼ ìƒë‹´í•˜ì—¬ ë³µì•½ ê³„íšì„ ì¬ì¡°ì •í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•©ë‹ˆë‹¤."));
        }

        // 7. ë©´ì±… ì¡°í•­
        document.add(new Paragraph("\n\n"));
        document.add(new Paragraph("ë³¸ ë¦¬í¬íŠ¸ëŠ” ì°¸ê³ ìš©ì´ë©°, ì˜ë£Œ ì§„ë‹¨ì´ë‚˜ ì²˜ë°©ì„ ëŒ€ì²´í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
            .setFontSize(10)
            .setItalic());

        document.close();
        return baos.toByteArray();
    }
}
```

**Step 3: Frontend - ë¦¬í¬íŠ¸ ìƒì„± UI**
```javascript
const AdherenceReportGenerator = () => {
  const [startDate, setStartDate] = useState(
    new Date(Date.now() - 30 * 24 * 60 * 60 * 1000) // 30ì¼ ì „
  );
  const [endDate, setEndDate] = useState(new Date());
  const [reportData, setReportData] = useState(null);
  const [loading, setLoading] = useState(false);

  // ë¦¬í¬íŠ¸ ë°ì´í„° ì¡°íšŒ
  const generateReport = async () => {
    setLoading(true);
    try {
      const response = await fetch('/api/adherence/report', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          userId: currentUser.id,
          startDate: startDate.toISOString().split('T')[0],
          endDate: endDate.toISOString().split('T')[0]
        })
      });

      const data = await response.json();
      setReportData(data);
    } catch (error) {
      console.error('ë¦¬í¬íŠ¸ ìƒì„± ì‹¤íŒ¨:', error);
      alert('ë¦¬í¬íŠ¸ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    } finally {
      setLoading(false);
    }
  };

  // PDF ë‹¤ìš´ë¡œë“œ
  const downloadPDF = async () => {
    try {
      const response = await fetch('/api/adherence/report/pdf', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          userId: currentUser.id,
          startDate: startDate.toISOString().split('T')[0],
          endDate: endDate.toISOString().split('T')[0]
        })
      });

      const blob = await response.blob();
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `ë³µì•½ìˆœì‘ë„ë¦¬í¬íŠ¸_${currentUser.name}_${startDate.toISOString().split('T')[0]}.pdf`;
      document.body.appendChild(a);
      a.click();
      window.URL.revokeObjectURL(url);
      document.body.removeChild(a);
    } catch (error) {
      console.error('PDF ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨:', error);
      alert('PDF ë‹¤ìš´ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    }
  };

  return (
    <div className="adherence-report-generator">
      <h2>ë³µì•½ ìˆœì‘ë„ ë¦¬í¬íŠ¸</h2>

      <div className="date-selector">
        <label>
          ì‹œì‘ì¼:
          <input
            type="date"
            value={startDate.toISOString().split('T')[0]}
            onChange={e => setStartDate(new Date(e.target.value))}
          />
        </label>

        <label>
          ì¢…ë£Œì¼:
          <input
            type="date"
            value={endDate.toISOString().split('T')[0]}
            onChange={e => setEndDate(new Date(e.target.value))}
          />
        </label>

        <button onClick={generateReport} disabled={loading}>
          {loading ? 'ìƒì„± ì¤‘...' : 'ë¦¬í¬íŠ¸ ìƒì„±'}
        </button>
      </div>

      {reportData && (
        <div className="report-preview">
          {/* ì „ì²´ ìˆœì‘ë„ */}
          <div className="overall-adherence">
            <h3>ì „ì²´ ìˆœì‘ë„</h3>
            <div className="adherence-circle" style={{
              background: `conic-gradient(#4caf50 ${reportData.overallAdherence * 3.6}deg, #e0e0e0 0deg)`
            }}>
              <span>{reportData.overallAdherence.toFixed(1)}%</span>
            </div>
          </div>

          {/* ì•½ë¬¼ë³„ ìƒì„¸ */}
          <div className="medication-details">
            <h3>ì•½ë¬¼ë³„ ë³µì•½ í˜„í™©</h3>
            {reportData.medicationAdherences.map((adherence, idx) => (
              <div key={idx} className="medication-card">
                <h4>{adherence.medication.name}</h4>
                <div className="adherence-bar">
                  <div
                    className="adherence-fill"
                    style={{ width: `${adherence.adherenceRate}%` }}
                  />
                </div>
                <p>
                  ìˆœì‘ë„: {adherence.adherenceRate.toFixed(1)}%
                  ({adherence.completedCount}/{adherence.totalExpected})
                </p>
                {adherence.missedCount > 0 && (
                  <p className="missed-info">
                    ëˆ„ë½: {adherence.missedCount}íšŒ
                    ({adherence.missedDates.slice(0, 3).join(', ')}
                    {adherence.missedDates.length > 3 && '...'})
                  </p>
                )}
              </div>
            ))}
          </div>

          {/* ì£¼ê°„ë³„ íŠ¸ë Œë“œ */}
          <div className="weekly-trends">
            <h3>ì£¼ê°„ë³„ íŠ¸ë Œë“œ</h3>
            <div className="trend-chart">
              {reportData.weeklyTrends.map((trend, idx) => (
                <div key={idx} className="trend-bar-container">
                  <div
                    className="trend-bar"
                    style={{ height: `${trend.adherenceRate}%` }}
                  >
                    <span>{trend.adherenceRate.toFixed(0)}%</span>
                  </div>
                  <label>Week {idx + 1}</label>
                </div>
              ))}
            </div>
          </div>

          {/* PDF ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ */}
          <button className="download-pdf-btn" onClick={downloadPDF}>
            ğŸ“„ PDF ë‹¤ìš´ë¡œë“œ
          </button>
        </div>
      )}
    </div>
  );
};
```

#### ì˜ë£Œì§„ í˜œíƒ
- ì •í™•í•œ ë³µì•½ ë°ì´í„°ë¡œ ì§„ë‹¨ ì •í™•ë„ í–¥ìƒ
- "ì•½ íš¨ê³¼ ì—†ìŒ" = ì•½ì„ ì•ˆ ë¨¹ì–´ì„œ vs ì•½ì´ ì•ˆ ë§ì•„ì„œ íŒë‹¨ ê°€ëŠ¥
- ê°ê´€ì  ë°ì´í„° ê¸°ë°˜ ì¹˜ë£Œ ê³„íš ìˆ˜ë¦½

#### ì°¨ë³„ì 
- âœ… **B2B í™•ì¥ ê°€ëŠ¥ì„±**: ë³‘ì› ì—°ê³„ ì„œë¹„ìŠ¤ë¡œ ë°œì „ (EMR í†µí•©)
- âœ… **ì˜ë£Œì§„-í™˜ì ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ê°œì„ **
- âœ… **ë°ì´í„° ê¸°ë°˜ ì˜ë£Œ**: í™˜ì ìê°€ ë³´ê³ ë³´ë‹¤ ì •í™•í•œ ë³µì•½ ë°ì´í„°

---

### 6. **ì•½ê°’ ì ˆì•½ ë¹„êµ** (ë³´í—˜ ì ìš© ìµœì í™”) â­â­â­

#### í˜„ì‹¤ì  ë¬¸ì œ
- ê°™ì€ ì„±ë¶„ ì•½ì¸ë° ê°€ê²© ì²œì°¨ë§Œë³„
- ì˜¤ë¦¬ì§€ë„ ì•½ vs ë³µì œì•½(ì œë„¤ë¦­) ì°¨ì´ ëª¨ë¦„
- ì‹œë‹ˆì–´ëŠ” ê²½ì œì  ë¶€ë‹´ í¼

#### ì†”ë£¨ì…˜
```
[ì‹œë‚˜ë¦¬ì˜¤]
ì‚¬ìš©ì: "ë¦¬í”¼í†  20mg" ë“±ë¡

ì‹œìŠ¤í…œ:
ğŸ’¡ ì ˆì•½ íŒ
ë™ì¼ ì„±ë¶„(ì•„í† ë¥´ë°”ìŠ¤íƒ€í‹´) ë³µì œì•½ 'ì•„í† ë°”ì •'ì€
ì›” 30,000ì› â†’ 20,000ì› (33% ì €ë ´)

ì²˜ë°© ì‹œ ì˜ì‚¬ì—ê²Œ "ë³µì œì•½ìœ¼ë¡œ ë³€ê²½ ê°€ëŠ¥í• ê¹Œìš”?" ë¬¸ì˜ ê°€ëŠ¥í•©ë‹ˆë‹¤.
```

#### ë°ì´í„° ì¶œì²˜
- ê±´ê°•ë³´í—˜ì‹¬ì‚¬í‰ê°€ì› ì•½ê°€ ì •ë³´ (ê³µê³µ API)

#### ì°¨ë³„ì 
- âœ… **ì‹¤ë²„ì¸µ ê²½ì œì  ë¶€ë‹´ ì™„í™”**
- âœ… **ì‚¬íšŒì  ê°€ì¹˜** (ì˜ë£Œë¹„ ì ˆê°)

---

## ğŸš« ë²„ë ¤ì•¼ í•  ê¸°ëŠ¥ (ì‹œê°„ ë¶€ì¡±)

7ì£¼ ì•ˆì— ì™„ì„±í•˜ë ¤ë©´ ë‹¤ìŒ ê¸°ëŠ¥ë“¤ì€ **ê³¼ê°íˆ ì œì™¸**í•©ë‹ˆë‹¤:

| ê¸°ëŠ¥ | ì œì™¸ ì´ìœ  |
|------|-----------|
| âŒ AI ì‹ë‹¨ê´€ë¦¬ ì‚¬ì§„ ì¸ì‹ | ì •í™•ë„ ë³´ì¥ ëª»í•¨, í•œêµ­ ìŒì‹ ì¸ì‹ë¥  ë‚®ìŒ |
| âŒ ë§Œë³´ê³„ | ì›¹ì—ì„œ ì„¼ì„œ ì ‘ê·¼ ì œí•œì , í•µì‹¬ ì•„ë‹˜ |
| âŒ AI ìš´ë™ í¬ì¦ˆ êµì • | êµ¬í˜„ ë³µì¡ë„ ë†’ìŒ, ì‹œì—° ì–´ë ¤ì›€ |
| âŒ ëˆˆë°”ë”” AI ì²´í˜• ë¶„ì„ | ì‹œê°„ ëŒ€ë¹„ íš¨ê³¼ ë‚®ìŒ |
| âŒ ê±´ê°•ì‹í’ˆ ë„¤ì´ë²„ ì‡¼í•‘ ë¦¬ë·° ë„ì‹í™” | í•µì‹¬ ê¸°ëŠ¥ ì•„ë‹˜ |
| âŒ ê·¼ì²˜ ì•½êµ­ ì°¾ê¸° | Google Maps APIë§Œ ë¶™ì´ë©´ ë¨ (ìš°ì„ ìˆœìœ„ ë‚®ìŒ) |

**ëŒ€ì‹  ì§‘ì¤‘í•  ê²ƒ:**
- âœ… ê°€ì¡± ëŒë´„ ë„¤íŠ¸ì›Œí¬
- âœ… ì•½-ìŒì‹ ì¶©ëŒ ê²½ê³ 
- âœ… ì•½ë´‰ì§€ OCR
- âœ… ì•Œì•½ ì—­ê²€ìƒ‰

---

## ğŸ“² ì•Œë¦¼ ì‹œìŠ¤í…œ êµ¬í˜„ ë°©ì‹ (ì¤‘ìš”!)

### ğŸš¨ ê¸°ìˆ ì  ì œì•½ì‚¬í•­
- **React Native ì‚¬ìš© ê¸ˆì§€** â†’ ì›¹ì•±ë§Œ ì‚¬ìš©
- ì›¹ í‘¸ì‹œëŠ” ë¸Œë¼ìš°ì € ë‹«ìœ¼ë©´ ì•Œë¦¼ ì•ˆ ì˜´
- ë¶€ëª¨ë‹˜ì´ í•­ìƒ ë¸Œë¼ìš°ì €ë¥¼ ì¼œë†“ì§€ ì•ŠìŒ

### âœ… í˜„ì‹¤ì ì¸ êµ¬í˜„ ì „ëµ

#### **Phase 1: MVP - ì›¹ ê¸°ë°˜ ìˆ˜ë™ ì²´í¬** (í•„ìˆ˜ êµ¬í˜„)

```
[ë¶€ëª¨ë‹˜ í™”ë©´]
ì˜¤ëŠ˜ì˜ ì•½ ë³µìš© ì²´í¬ë¦¬ìŠ¤íŠ¸

â˜ ì•„ì¹¨ ì‹í›„ (ì˜¤ì „ 9ì‹œ)
  í˜ˆì••ì•½ (ì•„ëª¨ë””í•€) 1ì•Œ

â˜ ì ì‹¬ ì‹í›„ (ì˜¤í›„ 2ì‹œ)
  ë‹¹ë‡¨ì•½ (ë©”íŠ¸í¬ë¥´ë¯¼) 1ì•Œ

â˜ ì €ë… ì‹í›„ (ì˜¤í›„ 7ì‹œ)
  ê³ ì§€í˜ˆì¦ì•½ (ì•„í† ë¥´ë°”) 1ì•Œ

[ì²´í¬ë°•ìŠ¤ í´ë¦­ ì‹œ]
â†’ Hocuspocusë¡œ ì‹¤ì‹œê°„ ë™ê¸°í™”
â†’ ìë…€ í™”ë©´ì— ì¦‰ì‹œ ë°˜ì˜
```

```
[ìë…€ í™”ë©´]
ì–´ë¨¸ë‹ˆ ë³µì•½ í˜„í™© (ì‹¤ì‹œê°„)

âœ“ ì•„ì¹¨ ì•½ ë³µìš© ì™„ë£Œ (09:15)
âœ“ ì ì‹¬ ì•½ ë³µìš© ì™„ë£Œ (14:30)
â° ì €ë… ì•½ (19:00 ì˜ˆì •)

[3ì‹œê°„ ì§€ë‚˜ë„ ì²´í¬ ì•ˆ í•˜ë©´]
â†’ ìë…€ í™”ë©´ì— ë¹¨ê°„ìƒ‰ ê²½ê³  í‘œì‹œ
â†’ ë¸Œë¼ìš°ì € ì•Œë¦¼ (ì›¹ í‘¸ì‹œ)
```

**ê¸°ìˆ  êµ¬í˜„:**
```javascript
// Hocuspocusë¡œ ì‹¤ì‹œê°„ ë™ê¸°í™”
const FamilyMedicationSync = () => {
  const provider = new HocuspocusProvider({
    url: 'ws://your-server.com',
    name: `family-${familyId}`,
  });

  // ë¶€ëª¨ë‹˜ì´ ì²´í¬ë°•ìŠ¤ í´ë¦­
  const onMedicationCheck = (medId) => {
    // ì‹¤ì‹œê°„ ë™ê¸°í™”
    provider.document.update({
      medications: {
        [medId]: {
          completed: true,
          timestamp: Date.now()
        }
      }
    });

    // Kafka ì´ë²¤íŠ¸ ë°œí–‰
    kafkaProducer.send({
      topic: 'medication-completed',
      messages: [{
        key: familyId,
        value: { medId, userId: parentId }
      }]
    });
  };

  // ìë…€ëŠ” ì‹¤ì‹œê°„ìœ¼ë¡œ ë³€ê²½ì‚¬í•­ ìˆ˜ì‹ 
  provider.on('synced', ({ state }) => {
    updateUI(state.medications);
  });
};
```

**ì¥ì :**
- âœ… Hocuspocus ì‹¤ì‹œê°„ ë™ê¸°í™” í™œìš©
- âœ… ì›¹ ê¸°ìˆ ë§Œìœ¼ë¡œ êµ¬í˜„ ê°€ëŠ¥
- âœ… ì™¸ë¶€ API ì˜ì¡´ë„ ì—†ìŒ
- âœ… ë°ëª¨ ì‹œì—° ìš©ì´

**ë‹¨ì :**
- âš ï¸ ë¶€ëª¨ë‹˜ì´ ì›¹ ì ‘ì†í•´ì•¼ í•¨
- âš ï¸ ëŠ¥ë™ì  ì•Œë¦¼ ì—†ìŒ (ìˆ˜ë™ ì²´í¬)

---

#### **Phase 2: í™•ì¥ - ì¹´ì¹´ì˜¤í†¡ ì•Œë¦¼í†¡ ì—°ë™** (ì„ íƒì )

ì‹œê°„ ì—¬ìœ  ìˆì„ ë•Œ ì¶”ê°€ êµ¬í˜„ (ë˜ëŠ” ë°œí‘œ ìŠ¬ë¼ì´ë“œì—ë§Œ "í–¥í›„ ê³„íš"ìœ¼ë¡œ ëª…ì‹œ)

```
[í”Œë¡œìš°]
1. ì˜¤í›„ 2ì‹œ: Spring Boot ìŠ¤ì¼€ì¤„ëŸ¬ ì‹¤í–‰
   â†’ Kafka ì´ë²¤íŠ¸ ë°œí–‰: "medication-reminder"

2. n8n ì›Œí¬í”Œë¡œìš°ê°€ ì´ë²¤íŠ¸ ìˆ˜ì‹ 
   â†’ ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ API í˜¸ì¶œ

3. ë¶€ëª¨ë‹˜ ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ë©”ì‹œì§€ ë„ì°©:
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ğŸ’Š ì•½ ë“œì‹¤ ì‹œê°„ì…ë‹ˆë‹¤    â”‚
   â”‚                         â”‚
   â”‚ ì ì‹¬ ì•½ (ë‹¹ë‡¨ì•½)         â”‚
   â”‚ ë©”íŠ¸í¬ë¥´ë¯¼ 1ì•Œ, ì‹í›„ 30ë¶„â”‚
   â”‚                         â”‚
   â”‚ [ë³µìš© ì™„ë£Œí•˜ê¸°]          â”‚ â† ë²„íŠ¼
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4. ë²„íŠ¼ í´ë¦­ ì‹œ:
   â†’ https://your-app.com/med/complete?id=123&token=abc
   â†’ ì›¹ ë¸Œë¼ìš°ì € ì—´ë¦¼ â†’ ìë™ ë³µìš© ì™„ë£Œ ì²˜ë¦¬

5. 3ì‹œê°„ ì§€ë‚˜ë„ ë²„íŠ¼ ì•ˆ ëˆ„ë¥´ë©´:
   â†’ ìë…€ ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ì•Œë¦¼
   "ì–´ë¨¸ë‹ˆê°€ ì ì‹¬ ì•½ì„ ì•„ì§ ë“œì‹œì§€ ì•Šì•˜ìŠµë‹ˆë‹¤"
```

**ê¸°ìˆ  êµ¬í˜„:**
```java
// Spring Boot - ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ ë°œì†¡
@Service
public class KakaoAlimtalkService {

  @Autowired
  private KafkaTemplate<String, MedicationEvent> kafkaTemplate;

  public void sendMedicationReminder(User user, Medication med) {
    String callbackUrl = String.format(
      "https://your-app.com/medication/complete?id=%s&token=%s",
      med.getId(),
      tokenService.generateToken(user)
    );

    KakaoAlimtalkRequest request = KakaoAlimtalkRequest.builder()
      .templateCode("MEDICATION_REMINDER")
      .recipientNo(user.getPhoneNumber())
      .templateParameter(Map.of(
        "medName", med.getName(),
        "dosage", med.getDosage(),
        "timing", med.getTiming()
      ))
      .button(KakaoButton.builder()
        .name("ë³µìš© ì™„ë£Œí•˜ê¸°")
        .type("WL") // ì›¹ë§í¬
        .urlMobile(callbackUrl)
        .urlPc(callbackUrl)
        .build())
      .build();

    kakaoApiClient.sendAlimtalk(request);
  }
}
```

**n8n ì›Œí¬í”Œë¡œìš°:**
```
[Kafka Trigger]
  â†’ medication-reminder ì´ë²¤íŠ¸ ìˆ˜ì‹ 
    â†“
[HTTP Request]
  â†’ ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ API í˜¸ì¶œ
    â†“
[Delay 3 hours]
  â†’ 3ì‹œê°„ ëŒ€ê¸°
    â†“
[Check Database]
  â†’ ë³µìš© ì™„ë£Œ ì—¬ë¶€ í™•ì¸
    â†“
[If Not Completed]
  â†’ ìë…€ì—ê²Œ ì¹´ì¹´ì˜¤í†¡ ì•Œë¦¼ ë°œì†¡
```

**í•„ìš”í•œ ì¤€ë¹„:**
- ì¹´ì¹´ì˜¤ ë¹„ì¦ˆë‹ˆìŠ¤ ì±„ë„ ìƒì„± (30ë¶„)
- ì•Œë¦¼í†¡ í…œí”Œë¦¿ ì‚¬ì „ ë“±ë¡ (1-2ì¼ ëŒ€ê¸°)
- ì¹´ì¹´ì˜¤ ë°œì‹  í”„ë¡œí•„ ì¸ì¦

**ì¥ì :**
- âœ… ì‹œë‹ˆì–´ ì¹œí™”ì  (ì¹´ì¹´ì˜¤í†¡ì€ ì´ë¯¸ ì‚¬ìš© ì¤‘)
- âœ… ë†’ì€ ë„ë‹¬ë¥  (ê±°ì˜ 100% í™•ì¸)
- âœ… ë²„íŠ¼ í•œ ë²ˆë§Œ í´ë¦­
- âœ… ë°œí‘œ ì„íŒ©íŠ¸ ë†’ìŒ

**ë‹¨ì :**
- âš ï¸ ì¹´ì¹´ì˜¤ ìŠ¹ì¸ ê³¼ì • í•„ìš” (1-2ì¼)
- âš ï¸ êµ¬í˜„ ì‹œê°„ ì¶”ê°€ ì†Œìš” (1ì£¼)

---

#### **Phase 3: PWA ì•Œë¦¼ (ë³´ë¥˜)**

Progressive Web App ê¸°ëŠ¥ì€ iOS Safari ì§€ì› ì œí•œì ì´ë¯€ë¡œ **ë³´ë¥˜**

---

### ğŸ“Š ì•Œë¦¼ ì‹œìŠ¤í…œ ìš°ì„ ìˆœìœ„

| Phase | êµ¬í˜„ ë°©ì‹ | í•„ìˆ˜ ì—¬ë¶€ | ê°œë°œ ì‹œê°„ |
|-------|----------|----------|----------|
| Phase 1 | ì›¹ ê¸°ë°˜ ìˆ˜ë™ ì²´í¬ + Hocuspocus | âœ… í•„ìˆ˜ | 3ì¼ |
| Phase 2 | ì¹´ì¹´ì˜¤í†¡ ì•Œë¦¼í†¡ | âš ï¸ ì„ íƒ | 1ì£¼ |
| Phase 3 | PWA ì•Œë¦¼ | âŒ ë³´ë¥˜ | - |

**ê²°ë¡ :**
- **MVPëŠ” Phase 1ë§Œ êµ¬í˜„** (ì›¹ ê¸°ë°˜)
- **ì‹œê°„ ë‚¨ìœ¼ë©´ Phase 2 ì¶”ê°€**
- **ë°œí‘œ ìŠ¬ë¼ì´ë“œì—ëŠ” Phase 2ë¥¼ "í™•ì¥ ê³„íš"ìœ¼ë¡œ ëª…ì‹œ**

---

## ğŸ—‚ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ êµ¬ì¡°
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Frontend (React Web Only)                â”‚
â”‚  - React + Vite (JSX)                                   â”‚
â”‚  - Hocuspocus Provider (ê°€ì¡± ê°„ ì‹¤ì‹œê°„ ë™ê¸°í™”)           â”‚
â”‚  - TipTap (ë©”ëª¨/ì»¤ë®¤ë‹ˆì¼€ì´ì…˜)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ REST API / WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Backend (Spring Boot)                      â”‚
â”‚  - REST API (ì•½ ê´€ë¦¬, ì‹ë‹¨, ì‚¬ìš©ì)                      â”‚
â”‚  - Spring Boot Security (JWT ì¸ì¦)                      â”‚
â”‚  - Spring Boot AI (OCR, ì•½-ìŒì‹ ì¶©ëŒ ë¶„ì„)              â”‚
â”‚  - Kafka Producer (ì´ë²¤íŠ¸ ë°œí–‰)                         â”‚
â”‚  - Scheduler (ë³µì•½ ì•Œë¦¼ ìŠ¤ì¼€ì¤„ë§)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Database   â”‚            â”‚   External    â”‚
â”‚              â”‚            â”‚   Services    â”‚
â”‚ - MySQL/     â”‚            â”‚ - Hocuspocus  â”‚
â”‚   PostgreSQL â”‚            â”‚   Server      â”‚
â”‚ - Redis      â”‚            â”‚ - Kafka       â”‚
â”‚   (ì„¸ì…˜,ìºì‹œ)â”‚            â”‚ - n8n         â”‚
â”‚              â”‚            â”‚ - Naver Clova â”‚
â”‚              â”‚            â”‚   OCR         â”‚
â”‚              â”‚            â”‚ - ì‹ì•½ì²˜ API  â”‚
â”‚              â”‚            â”‚ - ì¹´ì¹´ì˜¤í†¡    â”‚
â”‚              â”‚            â”‚   (Phase 2)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì£¼ìš” ëª¨ë“ˆ

#### Frontend ëª¨ë“ˆ
```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ auth/           # ë¡œê·¸ì¸, íšŒì›ê°€ì…
â”‚   â”œâ”€â”€ family/         # ê°€ì¡± ê·¸ë£¹ ê´€ë¦¬
â”‚   â”œâ”€â”€ medication/     # ì•½ ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ MedicationList.jsx
â”‚   â”‚   â”œâ”€â”€ MedicationSchedule.jsx  (ë¶€ëª¨ë‹˜ìš© ì²´í¬ë¦¬ìŠ¤íŠ¸)
â”‚   â”‚   â”œâ”€â”€ FamilyMonitor.jsx       (ìë…€ìš© ëª¨ë‹ˆí„°ë§)
â”‚   â”‚   â””â”€â”€ OCRScanner.jsx          (ì•½ë´‰ì§€ ìŠ¤ìº”)
â”‚   â”œâ”€â”€ diet/           # ì‹ë‹¨ ê´€ë¦¬
â”‚   â””â”€â”€ dashboard/      # í†µí•© ëŒ€ì‹œë³´ë“œ
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useHocuspocus.js  # ì‹¤ì‹œê°„ ë™ê¸°í™” í›…
â””â”€â”€ services/
    â”œâ”€â”€ medicationApi.js
    â””â”€â”€ familySync.js
```

#### Backend ì„œë¹„ìŠ¤
```
com.amapill/
â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ AuthController
â”‚   â”œâ”€â”€ MedicationController
â”‚   â”œâ”€â”€ FamilyController
â”‚   â””â”€â”€ DietController
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ MedicationService
â”‚   â”‚   â”œâ”€â”€ scheduleReminder()
â”‚   â”‚   â”œâ”€â”€ checkMissedDoses()
â”‚   â”‚   â””â”€â”€ analyzeAdherence()
â”‚   â”œâ”€â”€ FamilyService
â”‚   â”‚   â”œâ”€â”€ syncMedicationStatus()
â”‚   â”‚   â””â”€â”€ notifyFamily()
â”‚   â”œâ”€â”€ DrugInteractionService  # ì•½-ìŒì‹ ì¶©ëŒ ì²´í¬
â”‚   â”œâ”€â”€ OCRService              # ì•½ë´‰ì§€ ì¸ì‹
â”‚   â””â”€â”€ KakaoAlimtalkService    # Phase 2
â”œâ”€â”€ kafka/
â”‚   â”œâ”€â”€ MedicationEventProducer
â”‚   â””â”€â”€ NotificationConsumer
â””â”€â”€ scheduler/
    â””â”€â”€ MedicationReminderScheduler
```

---

## ğŸš€ í˜„ì‹¤ì ì¸ 7ì£¼ ê°œë°œ ë¡œë“œë§µ

**ë°œí‘œì¼: 2025ë…„ 12ì›” 31ì¼**
**ì‹¤ì œ ê°œë°œ ê¸°ê°„: 7ì£¼ (ë°œí‘œ ì¤€ë¹„ 1ì£¼ ì œì™¸)**

### Week 1: ì¸í”„ë¼ êµ¬ì¶• (11/5 ~ 11/11)
- [ ] React + Spring Boot í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì •
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„
- [ ] JWT ì¸ì¦/ì¸ê°€ êµ¬í˜„
- [ ] Hocuspocus ì„œë²„ ì„¤ì •
- [ ] Kafka ì„¤ì¹˜ ë° ì„¤ì •

### Week 2: ê°€ì¡± ëŒë´„ ë„¤íŠ¸ì›Œí¬ (11/12 ~ 11/18) â­ í•µì‹¬!
- [ ] ê°€ì¡± ê·¸ë£¹ ìƒì„± ê¸°ëŠ¥
- [ ] Hocuspocus ì‹¤ì‹œê°„ ë™ê¸°í™” êµ¬í˜„
- [ ] ë¶€ëª¨ë‹˜ìš© ì²´í¬ë¦¬ìŠ¤íŠ¸ UI
- [ ] ìë…€ìš© ëª¨ë‹ˆí„°ë§ ëŒ€ì‹œë³´ë“œ
- [ ] Kafka ì´ë²¤íŠ¸ ê¸°ë°˜ ì•Œë¦¼ (ì›¹ ë‚´ë¶€)

### Week 3: ì•½ ê´€ë¦¬ ê¸°ë³¸ ê¸°ëŠ¥ (11/19 ~ 11/25)
- [ ] ì•½ ì •ë³´ CRUD
- [ ] ë³µìš© ìŠ¤ì¼€ì¤„ ë“±ë¡
- [ ] ì¬ê³  ê´€ë¦¬
- [ ] ìœ íš¨ê¸°ê°„ ì¶”ì 
- [ ] ì‹ì•½ì²˜ API ì—°ë™ (ì•½ ì •ë³´ ì¡°íšŒ)

### Week 4: ì°¨ë³„í™” ê¸°ëŠ¥ 1íƒ„ (11/26 ~ 12/2)
- [ ] **ì•½ë´‰ì§€ OCR ìë™ ë“±ë¡** (Naver Clova OCR)
- [ ] **ì•Œì•½ ì—­ê²€ìƒ‰** (ì‹ì•½ì²˜ ì‹ë³„ì •ë³´ API)
- [ ] **ì•½-ìŒì‹ ì¶©ëŒ ê²½ê³ ** (ë£° ë² ì´ìŠ¤ ì‹œìŠ¤í…œ)

### Week 5: ì‹ë‹¨ ê´€ë¦¬ + ì¶”ê°€ ê¸°ëŠ¥ (12/3 ~ 12/9)
- [ ] ì‹ë‹¨ ê¸°ë¡ ê¸°ëŠ¥ (ìˆ˜ë™ ì…ë ¥)
- [ ] ìŒì‹ ë°ì´í„°ë² ì´ìŠ¤ (ê³µê³µ API)
- [ ] ì•½-ìŒì‹ ì¶©ëŒ ì‹¤ì‹œê°„ ì²´í¬
- [ ] **ë³µì•½ ìˆœì‘ë„ ë¦¬í¬íŠ¸** (PDF ìƒì„±)

### Week 6: í†µí•© ë° í…ŒìŠ¤íŠ¸ (12/10 ~ 12/16)
- [ ] ì „ì²´ ê¸°ëŠ¥ í†µí•© í…ŒìŠ¤íŠ¸
- [ ] ë²„ê·¸ ìˆ˜ì •
- [ ] ì„±ëŠ¥ ìµœì í™” (Redis ìºì‹±)
- [ ] UI/UX ê°œì„ 
- [ ] Phase 2 (ì¹´ì¹´ì˜¤í†¡) ì°©ìˆ˜ (ì‹œê°„ ë˜ë©´)

### Week 7: ìµœì¢… ë§ˆë¬´ë¦¬ (12/17 ~ 12/23)
- [ ] ì‹œë‹ˆì–´ ì‚¬ìš©ì„± í…ŒìŠ¤íŠ¸
- [ ] ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] ë°°í¬ (AWS/GCP)
- [ ] ë§¤ë‰´ì–¼ ì‘ì„±

### Week 8: ë°œí‘œ ì¤€ë¹„ (12/24 ~ 12/31)
- [ ] ë°œí‘œ ìë£Œ ì œì‘
- [ ] ë°ëª¨ ì‹œë‚˜ë¦¬ì˜¤ ì¤€ë¹„
- [ ] ë¦¬í—ˆì„¤
- [ ] **12/31 ìµœì¢… ë°œí‘œ** ğŸ‰

---

## ğŸ¯ MVP ê¸°ëŠ¥ ìš°ì„ ìˆœìœ„

7ì£¼ ì•ˆì— ì™„ì„±í•´ì•¼ í•˜ë¯€ë¡œ, ìš°ì„ ìˆœìœ„ë¥¼ ëª…í™•íˆ í•©ë‹ˆë‹¤.

| ìš°ì„ ìˆœìœ„ | ê¸°ëŠ¥ | ê°œë°œ ì‹œê°„ | ì°¨ë³„í™” | í•„ìˆ˜ ì—¬ë¶€ |
|---------|------|----------|--------|----------|
| ğŸ¥‡ 1ìˆœìœ„ | **ê°€ì¡± ëŒë´„ ë„¤íŠ¸ì›Œí¬** | 2ì£¼ | â­â­â­â­â­ | âœ… í•„ìˆ˜ |
| ğŸ¥ˆ 2ìˆœìœ„ | **ì•½-ìŒì‹ ì¶©ëŒ ê²½ê³ ** | 1.5ì£¼ | â­â­â­â­â­ | âœ… í•„ìˆ˜ |
| ğŸ¥‰ 3ìˆœìœ„ | **ì•½ë´‰ì§€ OCR ìë™ ë“±ë¡** | 1.5ì£¼ | â­â­â­â­ | âœ… í•„ìˆ˜ |
| 4ìˆœìœ„ | **ì•Œì•½ ì—­ê²€ìƒ‰** | 1ì£¼ | â­â­â­â­ | âœ… í•„ìˆ˜ |
| 5ìˆœìœ„ | **ë³µì•½ ìˆœì‘ë„ ë¦¬í¬íŠ¸** | 3ì¼ | â­â­â­ | âš ï¸ ì„ íƒ |
| 6ìˆœìœ„ | ì•½ê°’ ì ˆì•½ ë¹„êµ | 2ì¼ | â­â­â­ | âš ï¸ ì„ íƒ |
| 7ìˆœìœ„ | ì¹´ì¹´ì˜¤í†¡ ì•Œë¦¼í†¡ (Phase 2) | 1ì£¼ | â­â­â­â­ | âš ï¸ ì‹œê°„ ìˆìœ¼ë©´ |

**ë‚˜ë¨¸ì§€ ì‹œê°„**: ê¸°ë³¸ CRUD + í†µí•© + í…ŒìŠ¤íŠ¸

---

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ (ERD)

### ì£¼ìš” í…Œì´ë¸”

```sql
-- ì‚¬ìš©ì ë° ê°€ì¡±
users (
  id, email, password_hash, name, phone, role, created_at
)

family_groups (
  id, name, created_by, created_at
)

family_members (
  id, family_group_id, user_id, role [parent/child], joined_at
)

-- ì•½ ê´€ë¦¬
medications (
  id, user_id, name, ingredient, dosage, timing,
  start_date, end_date, quantity, remaining,
  expiry_date, created_at
)

medication_schedules (
  id, medication_id, time, days_of_week, active
)

medication_logs (
  id, medication_id, user_id, scheduled_time,
  completed_time, completed, missed, created_at
)

-- ì•½-ìŒì‹ ìƒí˜¸ì‘ìš©
drug_food_interactions (
  id, drug_name, food_name, ingredient,
  reason, severity, alternatives
)

-- ì‹ë‹¨ ê´€ë¦¬
diet_logs (
  id, user_id, meal_type [breakfast/lunch/dinner/snack],
  food_name, calories, recorded_at
)

diet_warnings (
  id, user_id, diet_log_id, medication_id,
  warning_message, severity, created_at
)

-- ì•Œë¦¼
notifications (
  id, user_id, type, title, message,
  read, created_at
)
```

---

## ğŸ”’ ë²•ì  ë¦¬ìŠ¤í¬ íšŒí”¼ ì „ëµ

### âš ï¸ ì£¼ì˜í•´ì•¼ í•  ë²•ê·œ

#### 1. ì•½ ì¶”ì²œ ê¸ˆì§€ (ì•½ì‚¬ë²• ìœ„ë°˜)
- **ìœ„ë°˜**: "í˜ˆì••ì•½ìœ¼ë¡œ â—‹â—‹â—‹ì„ ë“œì„¸ìš”"
- **í•´ê²°**:
  - âœ… "ì˜ì‚¬ ì²˜ë°©ì— ë”°ë¼ ë“±ë¡í•˜ì„¸ìš”"
  - âœ… ì •ë³´ ì œê³µë§Œ (íš¨ëŠ¥, ì£¼ì˜ì‚¬í•­)
  - âœ… "ì•½ì‚¬ì™€ ìƒë‹´í•˜ì„¸ìš”" ë¬¸êµ¬ ì‚½ì…

#### 2. í—ˆìœ„/ê³¼ì¥ ê´‘ê³  ê¸ˆì§€
- **ìœ„ë°˜**: "ì´ ì•½ì„ ë¨¹ìœ¼ë©´ í˜ˆì••ì´ ë‚®ì•„ì§‘ë‹ˆë‹¤"
- **í•´ê²°**:
  - âœ… ì‹ì•½ì²˜ ê³µì‹ ì •ë³´ë§Œ í‘œì‹œ
  - âœ… "ì¼ë°˜ì ì¸ íš¨ëŠ¥" ìˆ˜ì¤€ìœ¼ë¡œ ì œí•œ

#### 3. ê°œì¸ ì˜ë£Œì •ë³´ ë³´í˜¸
- **ë¯¼ê°ì •ë³´**: ì•½ ë³µìš© ë‚´ì—­, ê±´ê°• ìƒíƒœ
- **í•´ê²°**:
  - âœ… ëª…ì‹œì  ë™ì˜ íšë“
  - âœ… ì•”í˜¸í™” ì €ì¥
  - âœ… ê°€ì¡± ê³µìœ ë„ ë³¸ì¸ ë™ì˜ í•„ìˆ˜

### âœ… ì•ˆì „í•œ ê¸°ëŠ¥ êµ¬í˜„ ê°€ì´ë“œ

```javascript
// âŒ ì˜ëª»ëœ ì˜ˆì‹œ
"í˜ˆì••ì´ ë†’ìœ¼ì‹œë„¤ìš”. ì•„ëª¨ë””í•€ì„ ë³µìš©í•˜ì„¸ìš”."

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆì‹œ
"í˜ˆì••ì•½ ë³µìš© ìŠ¤ì¼€ì¤„ì„ ë“±ë¡í•˜ì‹œê² ìŠµë‹ˆê¹Œ?
 ì•½ì€ ì˜ì‚¬ì˜ ì²˜ë°©ì— ë”°ë¼ ë³µìš©í•´ì£¼ì„¸ìš”."

// âŒ ì˜ëª»ëœ ì˜ˆì‹œ
"ì´ ì•½ì€ í˜ˆì••ì„ ë‚®ì¶¥ë‹ˆë‹¤."

// âœ… ì˜¬ë°”ë¥¸ ì˜ˆì‹œ
"[ì‹ì•½ì²˜ ì •ë³´] ì´ ì•½ì€ ê³ í˜ˆì•• ì¹˜ë£Œì— ì‚¬ìš©ë©ë‹ˆë‹¤.
 ìì„¸í•œ ì‚¬í•­ì€ ì˜ì‚¬, ì•½ì‚¬ì™€ ìƒë‹´í•˜ì„¸ìš”."
```

---

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### ë°ì´í„° ë³´ì•ˆ
- ê°œì¸ ê±´ê°•ì •ë³´ AES-256 ì•”í˜¸í™” ì €ì¥
- HTTPS í†µì‹  ê°•ì œ (Let's Encrypt)
- SQL Injection ë°©ì§€ (Prepared Statement)
- XSS ê³µê²© ë°©ì§€ (ì…ë ¥ê°’ sanitization)

### ì¸ì¦/ì¸ê°€
- JWT ê¸°ë°˜ í† í° ì¸ì¦ (Access Token 15ë¶„, Refresh Token 7ì¼)
- ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ (ë¶€ëª¨/ìë…€ ê¶Œí•œ ë¶„ë¦¬)
- Redis ì„¸ì…˜ ê´€ë¦¬ (í† í° ë¸”ë™ë¦¬ìŠ¤íŠ¸)
- BCrypt ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™” (saltRounds: 10)

### ê°€ì¡± ì •ë³´ ê³µìœ  ë³´ì•ˆ
- ê°€ì¡± ì´ˆëŒ€ ì‹œ ì´ë©”ì¼/SMS ì¸ì¦ í•„ìˆ˜
- ì½ê¸° ì „ìš© vs í¸ì§‘ ê¶Œí•œ ë¶„ë¦¬
- ë¯¼ê° ì •ë³´ ì ‘ê·¼ ë¡œê·¸ ê¸°ë¡
- ê°€ì¡± ê·¸ë£¹ íƒˆí‡´ ì‹œ ë°ì´í„° ì ‘ê·¼ ì¦‰ì‹œ ì°¨ë‹¨

---

## ğŸ’¡ ì°¨ë³„í™” í¬ì¸íŠ¸ (ë°œí‘œìš©)

| í•­ëª© | ê¸°ì¡´ ì•± (ì•Œì•½, ë˜‘ë‹¥) | ìš°ë¦¬ ì•± (AMA...Pill) |
|------|---------------------|-------------------|
| íƒ€ê²Ÿ | ê°œì¸ ì‚¬ìš©ì | ì‹œë‹ˆì–´ + ìë…€ (ì–‘ë©´ ì‹œì¥) |
| ê°€ì¡± ì—°ë™ | âŒ ì—†ìŒ | âœ… ì‹¤ì‹œê°„ ëŒë´„ ë„¤íŠ¸ì›Œí¬ |
| ì•½-ìŒì‹ ì¶©ëŒ | âŒ ì—†ìŒ (ì•½-ì•½ë§Œ) | âœ… ìë™ ê²½ê³  ì‹œìŠ¤í…œ |
| ë°ì´í„° ì…ë ¥ | ìˆ˜ë™ ì…ë ¥ë§Œ | âœ… OCR ìë™ ì¸ì‹ |
| ì˜ë£Œì§„ ì†Œí†µ | âŒ ì—†ìŒ | âœ… ë³µì•½ ìˆœì‘ë„ ë¦¬í¬íŠ¸ |
| ì•Œë¦¼ ë°©ì‹ | ì•± í‘¸ì‹œë§Œ | âœ… ì›¹ + ì¹´ì¹´ì˜¤í†¡ (Phase 2) |
| ê²½ì œì  ê°€ì¹˜ | âŒ ì—†ìŒ | âœ… ì•½ê°’ ì ˆì•½ ë¹„êµ |

### í•µì‹¬ ë©”ì‹œì§€
> "í˜¼ìê°€ ì•„ë‹Œ, ê°€ì¡±ì´ í•¨ê»˜í•˜ëŠ” ì•½ ê´€ë¦¬"
> "ë–¨ì–´ì ¸ ìˆì–´ë„ ë¶€ëª¨ë‹˜ ê±´ê°•ì„ ì§€í‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤"

---

## ğŸ“± í–¥í›„ í™•ì¥ ê³„íš (ë°œí‘œ ìŠ¬ë¼ì´ë“œìš©)

### Phase 3: React Native ì „í™˜ (2026ë…„)
- í˜„ì¬ React ì›¹ì•±ì„ React Nativeë¡œ ë§ˆì´ê·¸ë ˆì´ì…˜
- ëª¨ë°”ì¼ ë„¤ì´í‹°ë¸Œ ê¸°ëŠ¥ í™œìš©:
  - ì¹´ë©”ë¼ ì ‘ê·¼ ê°œì„ 
  - ë°±ê·¸ë¼ìš´ë“œ í‘¸ì‹œ ì•Œë¦¼
  - ë””ë°”ì´ìŠ¤ ì„¼ì„œ ì—°ë™

### Phase 4: B2B í™•ì¥
- **ë³‘ì› ì—°ê³„**: ë³µì•½ ìˆœì‘ë„ ë¦¬í¬íŠ¸ ìë™ ì „ì†¡
- **ì•½êµ­ ì—°ê³„**: ì²˜ë°©ì „ ìë™ ë“±ë¡
- **ë³´í—˜ì‚¬ ì—°ê³„**: ë³µì•½ ì´í–‰ ì‹œ ë³´í—˜ë£Œ í• ì¸

### Phase 5: AI ê³ ë„í™”
- ê°œì¸í™”ëœ ê±´ê°• ì˜ˆì¸¡ ëª¨ë¸
- ìì—°ì–´ ê¸°ë°˜ ê±´ê°• ìƒë‹´ ì±—ë´‡
- ìŒì‹ ì‚¬ì§„ ì¸ì‹ (GPT-4 Vision)

---

## ğŸ¤ íŒ€ ì—­í•  ë¶„ë‹´

### íŒ€ì› 1: Frontend Lead
- React ì»´í¬ë„ŒíŠ¸ ê°œë°œ
- Hocuspocus ì‹¤ì‹œê°„ ë™ê¸°í™” êµ¬í˜„
- ë¶€ëª¨ë‹˜/ìë…€ ì–‘ë©´ UI ì„¤ê³„
- ë°˜ì‘í˜• ë””ìì¸ (ì‹œë‹ˆì–´ ì¹œí™”ì )

### íŒ€ì› 2: Backend Lead + AI
- Spring Boot REST API ê°œë°œ
- Kafka ì´ë²¤íŠ¸ ì²˜ë¦¬
- OCR ì—°ë™ (Naver Clova)
- ì•½-ìŒì‹ ì¶©ëŒ ë£° ì—”ì§„ ê°œë°œ

### íŒ€ì› 3: Database + DevOps
- ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ ë° ìµœì í™”
- Redis ìºì‹± ì „ëµ
- n8n ì›Œí¬í”Œë¡œìš° êµ¬ì„± (ì•Œë¦¼ ìë™í™”)
- AWS/GCP ë°°í¬ ë° CI/CD

> **ì°¸ê³ **: ì‹¤ì œ ì—­í• ì€ íŒ€ì› ê°•ì ì— ë”°ë¼ ìœ ì—°í•˜ê²Œ ì¡°ì •

---

## ğŸ“š ì°¸ê³  ìë£Œ

### ê¸°ìˆ  ë¬¸ì„œ
- [React ê³µì‹ ë¬¸ì„œ](https://react.dev/)
- [Spring Boot ê³µì‹ ë¬¸ì„œ](https://spring.io/projects/spring-boot)
- [Hocuspocus ë¬¸ì„œ](https://tiptap.dev/hocuspocus)
- [Kafka ë¬¸ì„œ](https://kafka.apache.org/documentation/)
- [Naver Clova OCR API](https://www.ncloud.com/product/aiService/ocr)

### ê³µê³µ ë°ì´í„°
- [ì‹ì•½ì²˜ ì˜ì•½í’ˆì•ˆì „ë‚˜ë¼ API](https://nedrug.mfds.go.kr/index)
- [ì‹ì•½ì²˜ ì˜ì•½í’ˆ ì‹ë³„ì •ë³´ API](https://www.data.go.kr/data/15075163/fileData.do)
- [ê±´ê°•ë³´í—˜ì‹¬ì‚¬í‰ê°€ì› ì•½ê°€ ì •ë³´](https://www.hira.or.kr/)

### ì˜ë£Œ ì •ë³´
- ëŒ€í•œì•½ì‚¬íšŒ ë³µì•½ì§€ë„ ìë£Œ
- ì‹ì•½ì²˜ ì˜ì•½í’ˆ ì•ˆì „ì„± ì •ë³´
- âš ï¸ ì£¼ì˜: ë³‘ì› ì›¹ì‚¬ì´íŠ¸ëŠ” ì¼ë¶€ ì ‘ê·¼ ì œí•œì´ ìˆì„ ìˆ˜ ìˆìŒ. ê³µê°œ PDF ìë£Œë‚˜ í•™ìˆ  ìë£Œ í™œìš© ê¶Œì¥

### ë²•ê·œ í™•ì¸
- ì•½ì‚¬ë²• (ì˜ì•½í’ˆ ì¶”ì²œ ê¸ˆì§€)
- ì˜ë£Œë²• (í—ˆìœ„/ê³¼ì¥ ê´‘ê³  ê¸ˆì§€)
- ê°œì¸ì •ë³´ë³´í˜¸ë²• (ë¯¼ê°ì •ë³´ ì²˜ë¦¬)

---

## ğŸ“ ì˜ì‚¬ê²°ì • ì‚¬í•­

### âœ… í™•ì •ëœ ê²°ì •
- âœ… React ì›¹ì•±ë§Œ ì‚¬ìš© (React Native ê¸ˆì§€)
- âœ… ê°€ì¡± ëŒë´„ ë„¤íŠ¸ì›Œí¬ë¥¼ í•µì‹¬ ì°¨ë³„í™”ë¡œ ì„¤ì •
- âœ… Phase 1 (ì›¹ ì•Œë¦¼) í•„ìˆ˜, Phase 2 (ì¹´ì¹´ì˜¤í†¡) ì„ íƒ
- âœ… AI ì‹ë‹¨ ì‚¬ì§„ ì¸ì‹ ì œì™¸
- âœ… ë§Œë³´ê³„, ìš´ë™ í¬ì¦ˆ êµì • ì œì™¸

### âš ï¸ ë¯¸ê²° ì‚¬í•­
- [ ] PostgreSQL vs MySQL ì„ íƒ
- [ ] Spring Cloud Security ì ìš© ì—¬ë¶€
- [ ] ë°°í¬ í™˜ê²½: AWS vs GCP
- [ ] ì¹´ì¹´ì˜¤í†¡ ì•Œë¦¼í†¡ êµ¬í˜„ ì—¬ë¶€ (ì‹œê°„ ë³´ê³  ê²°ì •)

### âœ… í™•ì •ëœ ê¸°ìˆ  ê²°ì • (2025-11-05 ì—…ë°ì´íŠ¸)

#### ë°±ì—”ë“œ ê¸°ìˆ  ìŠ¤íƒ
- âœ… **Java 21 LTS**: 2029ë…„ê¹Œì§€ ì¥ê¸° ì§€ì›, Virtual Threads, ZGC
- âœ… **Spring Boot 3.4.7**: 6ê°œì›” ì´ìƒ ê²€ì¦ëœ ì•ˆì • ë²„ì „ (49ê°œ ë²„ê·¸ ìˆ˜ì •)
  - 3.5.0 ì œì™¸ ì´ìœ : ë„ˆë¬´ ìµœì‹  (2025ë…„ 5ì›” ì¶œì‹œ, ê²€ì¦ ë¶€ì¡±)
  - í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ì¶©ë¶„íˆ ê²€ì¦ë¨
- âœ… **Spring Cloud 2024.0.2 (Moorgate)**: Spring Boot 3.4.x ì™„ë²½ í˜¸í™˜
  - Spring Framework 6.2.0 í†µí•©
  - Eureka Server ìµœì‹  ê¸°ëŠ¥ ì§€ì›

#### OCR ë° ì™¸ë¶€ API
- âœ… **OCR**: Google Cloud Vision API (ë©”ì¸) + Tesseract.js (Fallback)
  - Naver Clova OCR ì œì™¸ ì´ìœ : ìœ ë£Œ (ê¸°ë³¸ ìœ ì§€ë¹„ ë°œìƒ), ë¬´ë£Œ í•œë„ ë¶ˆëª…í™•
  - Google Vision ì„ íƒ ì´ìœ : ë¬´ë£Œ í•œë„ 1,000ê±´/ì›”, í•œê¸€ ì¸ì‹ë¥  95%+
  - Tesseract.js: ì™„ì „ ë¬´ë£Œ ë°±ì—… ì†”ë£¨ì…˜ (ì¸ì‹ë¥  80%)
- âœ… **ì•½-ìŒì‹ ìƒí˜¸ì‘ìš©**: ë£° ë² ì´ìŠ¤ ì‹œìŠ¤í…œ (AI ë¶ˆí•„ìš”)
- âœ… **ì‹ì•½ì²˜ API**: ê³µê³µë°ì´í„°í¬í„¸ í†µí•´ ë¬´ë£Œ ì‚¬ìš© ê°€ëŠ¥ í™•ì¸

---

## ğŸ¯ ì„±ê³µ ì§€í‘œ (KPI)

### ê¸°ëŠ¥ ì™„ì„±ë„
- í•µì‹¬ 4ëŒ€ ê¸°ëŠ¥ êµ¬í˜„ë¥  100% (ê°€ì¡± ëŒë´„, ì•½-ìŒì‹ ì¶©ëŒ, OCR, ì•Œì•½ ì—­ê²€ìƒ‰)
- Critical ë²„ê·¸: 0ê°œ
- Major ë²„ê·¸: < 3ê°œ

### ì‚¬ìš©ì„± (ë°œí‘œ ë°ëª¨)
- ë¶€ëª¨ë‹˜ ì—­í• : 3í´ë¦­ ì´ë‚´ì— ì•½ ë³µìš© ì²´í¬
- ìë…€ ì—­í• : ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ ì¦‰ì‹œ í™•ì¸
- OCR ì¸ì‹ë¥ : > 80%

### ê¸°ìˆ ì  ëª©í‘œ
- API ì‘ë‹µ ì‹œê°„: < 500ms
- Hocuspocus ë™ê¸°í™” ì§€ì—°: < 1ì´ˆ
- ì›¹ í˜ì´ì§€ ë¡œë”©: < 2ì´ˆ

---

## ğŸ’¬ íšŒì˜ë¡

### 2025-11-05 íšŒì˜
- **ì°¸ì„ì**: íŒ€ì› ì „ì²´
- **ê²°ì •ì‚¬í•­**:
  - ìŒì‹ ì‚¬ì§„ ì¹¼ë¡œë¦¬ ì¶”ì • â†’ ì œì™¸ (êµ¬í˜„ ì–´ë ¤ì›€, ì •í™•ë„ ë‚®ìŒ)
  - ê°€ì¡± ëŒë´„ ë„¤íŠ¸ì›Œí¬ â†’ í•µì‹¬ ê¸°ëŠ¥ìœ¼ë¡œ ì„ ì •
  - ì•Œë¦¼ ì‹œìŠ¤í…œ Phase 1 (ì›¹) í•„ìˆ˜, Phase 2 (ì¹´ì¹´ì˜¤í†¡) ì„ íƒ
  - React Native ì‚¬ìš© ê¸ˆì§€ í™•ì •
  - 7ì£¼ ë‚´ MVP ì™„ì„± ëª©í‘œ

---

## ğŸ“ ì—°ë½ì²˜ ë° ì €ì¥ì†Œ

- **GitHub Repository**: https://github.com/KOSA2025-FINAL-PROJECT-TEAM3/Front
- **Backend Repository**: (Backend ì €ì¥ì†Œ URL)
- **í”„ë¡œì íŠ¸ ê´€ë¦¬**: (Notion/Jira ë§í¬)
- **íŒ€ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜**: (Slack/Discord ë§í¬)

---

**ìµœì¢… ìˆ˜ì •ì¼**: 2025-11-05
**ë²„ì „**: 2.0 (ëŒ€í­ ê°œì„ )
**ì‘ì„±ì**: AMA...Pill ê°œë°œíŒ€
**ë¬¸ì„œ ìƒíƒœ**: ì°¸ì‹ í•œ ì°¨ë³„í™” ê¸°ëŠ¥ ì¶”ê°€, 7ì£¼ ë¡œë“œë§µ í™•ì •
